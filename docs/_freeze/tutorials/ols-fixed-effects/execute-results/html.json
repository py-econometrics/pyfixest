{
  "hash": "ac0876786346f1bec59a26b229328e1c",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"OLS with Fixed Effects\"\ndescription: \"Twin studies and worker-firm panels â€” learn to control for unobserved heterogeneity with one-way and two-way fixed effects.\"\ncategories: [Core Estimation]\nformat:\n  html:\n    html-table-processing: none\ntoc: true\ntoc-title: \"On this page\"\ntoc-location: left\n---\n\n::: {.callout-note}\n## Prerequisites\nYou should have read the [Getting Started](../getting-started.qmd) page and have `pyfixest` installed.\n:::\n\n## What Are Fixed Effects?\n\nA fixed effect model includes group-specific intercepts that absorb unobserved heterogeneity. The canonical panel data model is:\n\n$$\nY_{it} = \\beta X_{it} + \\alpha_i + \\psi_t + \\varepsilon_{it}\n$$\n\nwhere $\\alpha_i$ is an individual fixed effect (constant across time) and $\\psi_t$ is a time fixed effect (constant across individuals). Fixed effects are not limited to panel data --- any categorical grouping variable can serve as a fixed effect (e.g., cluster-randomized trials with cluster FE, or wage regressions with worker and firm FE).\n\n`PyFixest` estimates these models efficiently via iterative demeaning, avoiding the need to create thousands of dummy variables.\n\n## Application 1: Twin Studies --- Returns to Education\n\nHow much does an extra year of education raise wages? Naive OLS overstates the return because *ability* drives both education and wages. Twin studies (Ashenfelter & Krueger, 1994) solve this by comparing twins who share the same genetic endowment.\n\n::: {#70ccf853 .cell execution_count=1}\n``` {.python .cell-code}\nimport pyfixest as pf\n\ntwins = pf.get_twin_data(N_pairs=500, seed=42)\ntwins.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=1}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>twin_pair_id</th>\n      <th>twin_id</th>\n      <th>ability</th>\n      <th>educ</th>\n      <th>age</th>\n      <th>experience</th>\n      <th>log_wage</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1</td>\n      <td>1</td>\n      <td>0.304717</td>\n      <td>14.880083</td>\n      <td>38.0</td>\n      <td>17.119917</td>\n      <td>3.241823</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1</td>\n      <td>2</td>\n      <td>0.304717</td>\n      <td>13.942729</td>\n      <td>49.0</td>\n      <td>29.057271</td>\n      <td>3.379130</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2</td>\n      <td>1</td>\n      <td>-1.039984</td>\n      <td>10.041047</td>\n      <td>33.0</td>\n      <td>16.958953</td>\n      <td>2.303006</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2</td>\n      <td>2</td>\n      <td>-1.039984</td>\n      <td>8.475001</td>\n      <td>32.0</td>\n      <td>17.524999</td>\n      <td>2.057258</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>3</td>\n      <td>1</td>\n      <td>0.750451</td>\n      <td>8.000000</td>\n      <td>35.0</td>\n      <td>21.000000</td>\n      <td>3.449381</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Naive OLS (biased)\n\nWithout controlling for ability, the coefficient on `educ` captures both the true return and the ability premium:\n\n::: {#11a81f2e .cell execution_count=2}\n``` {.python .cell-code}\nfit_naive = pf.feols(\"log_wage ~ educ + experience\", data=twins)\nfit_naive.summary()\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n\n            <div id=\"ofpjxi\"></div>\n            <script type=\"text/javascript\" data-lets-plot-script=\"library\">\n                if(!window.letsPlotCallQueue) {\n                    window.letsPlotCallQueue = [];\n                }; \n                window.letsPlotCall = function(f) {\n                    window.letsPlotCallQueue.push(f);\n                };\n                (function() {\n                    var script = document.createElement(\"script\");\n                    script.type = \"text/javascript\";\n                    script.src = \"https://cdn.jsdelivr.net/gh/JetBrains/lets-plot@v4.7.3/js-package/distr/lets-plot.min.js\";\n                    script.onload = function() {\n                        window.letsPlotCall = function(f) {f();};\n                        window.letsPlotCallQueue.forEach(function(f) {f();});\n                        window.letsPlotCallQueue = [];\n                        \n                    };\n                    script.onerror = function(event) {\n                        window.letsPlotCall = function(f) {};    // noop\n                        window.letsPlotCallQueue = [];\n                        var div = document.createElement(\"div\");\n                        div.style.color = 'darkred';\n                        div.textContent = 'Error loading Lets-Plot JS';\n                        document.getElementById(\"ofpjxi\").appendChild(div);\n                    };\n                    var e = document.getElementById(\"ofpjxi\");\n                    e.appendChild(script);\n                })()\n            </script>\n            \n```\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n\n            <div id=\"BqG8PT\"></div>\n            <script type=\"text/javascript\" data-lets-plot-script=\"library\">\n                if(!window.letsPlotCallQueue) {\n                    window.letsPlotCallQueue = [];\n                }; \n                window.letsPlotCall = function(f) {\n                    window.letsPlotCallQueue.push(f);\n                };\n                (function() {\n                    var script = document.createElement(\"script\");\n                    script.type = \"text/javascript\";\n                    script.src = \"https://cdn.jsdelivr.net/gh/JetBrains/lets-plot@v4.7.3/js-package/distr/lets-plot.min.js\";\n                    script.onload = function() {\n                        window.letsPlotCall = function(f) {f();};\n                        window.letsPlotCallQueue.forEach(function(f) {f();});\n                        window.letsPlotCallQueue = [];\n                        \n                    };\n                    script.onerror = function(event) {\n                        window.letsPlotCall = function(f) {};    // noop\n                        window.letsPlotCallQueue = [];\n                        var div = document.createElement(\"div\");\n                        div.style.color = 'darkred';\n                        div.textContent = 'Error loading Lets-Plot JS';\n                        document.getElementById(\"BqG8PT\").appendChild(div);\n                    };\n                    var e = document.getElementById(\"BqG8PT\");\n                    e.appendChild(script);\n                })()\n            </script>\n            \n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n###\n\nEstimation:  OLS\nDep. var.: log_wage, Fixed effects: 0\nInference:  iid\nObservations:  1000\n\n| Coefficient   |   Estimate |   Std. Error |   t value |   Pr(>|t|) |   2.5% |   97.5% |\n|:--------------|-----------:|-------------:|----------:|-----------:|-------:|--------:|\n| Intercept     |      1.113 |        0.091 |    12.163 |      0.000 |  0.933 |   1.292 |\n| educ          |      0.114 |        0.007 |    17.548 |      0.000 |  0.101 |   0.127 |\n| experience    |      0.019 |        0.001 |    12.851 |      0.000 |  0.016 |   0.022 |\n---\nRMSE: 0.407 R2: 0.283 \n```\n:::\n:::\n\n\n### Twin-Pair Fixed Effects\n\nAdding twin-pair fixed effects absorbs the shared unobserved ability, isolating the within-pair variation in education:\n\n::: {#5e1c68aa .cell execution_count=3}\n``` {.python .cell-code}\nfit_fe = pf.feols(\"log_wage ~ educ + experience | twin_pair_id\", data=twins)\nfit_fe.summary()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nOMP: Info #276: omp_set_nested routine deprecated, please use omp_set_max_active_levels instead.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n###\n\nEstimation:  OLS\nDep. var.: log_wage, Fixed effects: twin_pair_id\nInference:  iid\nObservations:  1000\n\n| Coefficient   |   Estimate |   Std. Error |   t value |   Pr(>|t|) |   2.5% |   97.5% |\n|:--------------|-----------:|-------------:|----------:|-----------:|-------:|--------:|\n| educ          |      0.088 |        0.007 |    11.863 |      0.000 |  0.073 |   0.103 |\n| experience    |      0.020 |        0.002 |    12.516 |      0.000 |  0.016 |   0.023 |\n---\nRMSE: 0.214 R2: 0.801 R2 Within: 0.34 \n```\n:::\n:::\n\n\n### Compare Side by Side\n\nThe FE estimate (~0.08) is smaller than the naive OLS estimate, consistent with upward ability bias:\n\n::: {#683426c8 .cell execution_count=4}\n``` {.python .cell-code}\npf.etable(\n    [fit_naive, fit_fe],\n    labels={\"log_wage\": \"Log Hourly Wage\", \"educ\": \"Years of Education\", \"experience\": \"Experience\"},\n    felabels={\"twin_pair_id\": \"Twin Pair FE\"},\n    caption=\"Returns to Education: Naive OLS vs Twin FE\",\n)\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div id=\"iruekaglcj\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#iruekaglcj table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#iruekaglcj thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#iruekaglcj p { margin: 0; padding: 0; }\n #iruekaglcj .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: hidden; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: hidden; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #iruekaglcj .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #iruekaglcj .gt_title { color: #333333; font-size: 16px; font-weight: initial; padding-top: 6px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #iruekaglcj .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 5px; padding-bottom: 7px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #iruekaglcj .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #iruekaglcj .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #iruekaglcj .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #iruekaglcj .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 16px; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: bottom; padding-top: 2px; padding-bottom: 7px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #iruekaglcj .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 16px; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #iruekaglcj .gt_column_spanner_outer:first-child { padding-left: 0; }\n #iruekaglcj .gt_column_spanner_outer:last-child { padding-right: 0; }\n #iruekaglcj .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; vertical-align: bottom; padding-top: 2px; padding-bottom: 2px; overflow-x: hidden; display: inline-block; width: 100%; }\n #iruekaglcj .gt_spanner_row { border-bottom-style: hidden; }\n #iruekaglcj .gt_group_heading { padding-top: 0px; padding-bottom: 0px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 0.25px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: white; border-right-style: none; border-right-width: 1px; border-right-color: white; vertical-align: middle; text-align: left; }\n #iruekaglcj .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; border-top-style: solid; border-top-width: 0.25px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; vertical-align: middle; }\n #iruekaglcj .gt_from_md> :first-child { margin-top: 0; }\n #iruekaglcj .gt_from_md> :last-child { margin-bottom: 0; }\n #iruekaglcj .gt_row { padding-top: 2px; padding-bottom: 2px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: middle; overflow-x: hidden; }\n #iruekaglcj .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 16px; font-weight: initial; text-transform: inherit; border-right-style: hidden; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #iruekaglcj .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #iruekaglcj .gt_row_group_first td { border-top-width: 0.25px; }\n #iruekaglcj .gt_row_group_first th { border-top-width: 0.25px; }\n #iruekaglcj .gt_striped { color: #333333; background-color: #F4F4F4; }\n #iruekaglcj .gt_table_body { border-top-style: solid; border-top-width: 0px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: black; }\n #iruekaglcj .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }\n #iruekaglcj .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }\n #iruekaglcj .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }\n #iruekaglcj .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #iruekaglcj .gt_sourcenote { font-size: 10px; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #iruekaglcj .gt_left { text-align: left; }\n #iruekaglcj .gt_center { text-align: center; }\n #iruekaglcj .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #iruekaglcj .gt_font_normal { font-weight: normal; }\n #iruekaglcj .gt_font_bold { font-weight: bold; }\n #iruekaglcj .gt_font_italic { font-style: italic; }\n #iruekaglcj .gt_super { font-size: 65%; }\n #iruekaglcj .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #iruekaglcj .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n<thead>\n\n  <tr class=\"gt_heading\">\n    <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal\">Returns to Education: Naive OLS vs Twin FE</td>\n  </tr>\n<tr class=\"gt_col_headings gt_spanner_row\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"\"></th>\n  <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"Log-Hourly-Wage\">\n    <span class=\"gt_column_spanner\">Log Hourly Wage</span>\n  </th>\n</tr>\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"0\">(1)</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"1\">(2)</th>\n</tr>\n</thead>\n<tbody class=\"gt_table_body\">\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">coef</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Years of Education</th>\n    <td class=\"gt_row gt_center\">0.114*** <br> (0.007)</td>\n    <td class=\"gt_row gt_center\">0.088*** <br> (0.007)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Experience</th>\n    <td class=\"gt_row gt_center\">0.019*** <br> (0.001)</td>\n    <td class=\"gt_row gt_center\">0.02*** <br> (0.002)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Intercept</th>\n    <td class=\"gt_row gt_center\">1.113*** <br> (0.091)</td>\n    <td class=\"gt_row gt_center\"></td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">fe</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Twin Pair FE</th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">x</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">stats</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Observations</th>\n    <td class=\"gt_row gt_center\">1,000</td>\n    <td class=\"gt_row gt_center\">1,000</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.283</td>\n    <td class=\"gt_row gt_center\">0.801</td>\n  </tr>\n</tbody>\n  <tfoot class=\"gt_sourcenotes\">\n  \n  <tr>\n    <td class=\"gt_sourcenote\" colspan=\"3\">Significance levels: * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001. Format of coefficient cell: Coefficient   (Std. Error)</td>\n  </tr>\n\n</tfoot>\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\n::: {#ebfe7716 .cell execution_count=5}\n``` {.python .cell-code}\npf.coefplot([fit_naive, fit_fe], keep=\"educ\")\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```{=html}\n   <div id=\"aaIZUj\"></div>\n   <script type=\"text/javascript\" data-lets-plot-script=\"plot\">\n   \n   (function() {\n   // ----------\n   \n   const forceImmediateRender = false;\n   const responsive = false;\n   \n   let sizing = {\n       width_mode: \"MIN\",\n       height_mode: \"SCALED\",\n       width: null, \n       height: null \n   };\n   \n   const preferredWidth = document.body.dataset.letsPlotPreferredWidth;\n   if (preferredWidth !== undefined) {\n       sizing = {\n           width_mode: 'FIXED',\n           height_mode: 'SCALED',\n           width: parseFloat(preferredWidth)\n       };\n   }\n   \n   const containerDiv = document.getElementById(\"aaIZUj\");\n   let fig = null;\n   \n   function renderPlot() {\n       if (fig === null) {\n           const plotSpec = {\n\"data\":{\n\"Coefficient\":[\"educ\",\"educ\",\"educ\",\"educ\"],\n\"Estimate\":[0.11421314363891215,0.08804913053082983,0.11421314363891215,0.08804913053082983],\n\"2.5%\":[0.10144129742596628,0.07346628392819354,0.10144129742596628,0.07346628392819354],\n\"97.5%\":[0.12698498985185802,0.10263197713346611,0.12698498985185802,0.10263197713346611],\n\"Model\":[\"log_wage~educ+experience\",\"log_wage~educ+experience|twin_pair_id\",\"log_wage~educ+experience\",\"log_wage~educ+experience|twin_pair_id\"]\n},\n\"mapping\":{\n\"x\":\"Coefficient\",\n\"y\":\"Estimate\",\n\"color\":\"Model\"\n},\n\"data_meta\":{\n\"series_annotations\":[{\n\"type\":\"int\",\n\"column\":\"level_0\"\n},{\n\"type\":\"str\",\n\"column\":\"Coefficient\"\n},{\n\"type\":\"int\",\n\"column\":\"index\"\n},{\n\"type\":\"float\",\n\"column\":\"Estimate\"\n},{\n\"type\":\"float\",\n\"column\":\"Std. Error\"\n},{\n\"type\":\"float\",\n\"column\":\"t value\"\n},{\n\"type\":\"float\",\n\"column\":\"Pr(>|t|)\"\n},{\n\"type\":\"float\",\n\"column\":\"2.5%\"\n},{\n\"type\":\"float\",\n\"column\":\"97.5%\"\n},{\n\"type\":\"str\",\n\"column\":\"Model\"\n}]\n},\n\"guides\":{\n\"y\":{\n\"title\":\"Estimate and 95.0% Confidence Interval\"\n}\n},\n\"coord\":{\n\"name\":\"flip\",\n\"flip\":true\n},\n\"ggsize\":{\n\"width\":500.0,\n\"height\":300.0\n},\n\"theme\":{\n\"axis_text_x\":{\n\"angle\":0.0,\n\"blank\":false\n}\n},\n\"kind\":\"plot\",\n\"scales\":[],\n\"layers\":[{\n\"geom\":\"point\",\n\"mapping\":{\n},\n\"position\":{\n\"name\":\"dodge\",\n\"width\":0.5\n},\n\"data_meta\":{\n},\n\"data\":{\n}\n},{\n\"geom\":\"errorbar\",\n\"mapping\":{\n\"ymin\":\"2.5%\",\n\"ymax\":\"97.5%\"\n},\n\"position\":{\n\"name\":\"dodge\",\n\"width\":0.5\n},\n\"data_meta\":{\n},\n\"width\":0.05,\n\"data\":{\n}\n},{\n\"geom\":\"hline\",\n\"mapping\":{\n},\n\"data_meta\":{\n},\n\"yintercept\":0.0,\n\"linetype\":\"dashed\",\n\"color\":\"black\",\n\"data\":{\n}\n}],\n\"metainfo_list\":[],\n\"spec_id\":\"1\"\n};\n           window.letsPlotCall(function() { fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, containerDiv, sizing); });\n       } else {\n           fig.updateView({});\n       }\n   }\n   \n   const renderImmediately = \n       forceImmediateRender || (\n           sizing.width_mode === 'FIXED' && \n           (sizing.height_mode === 'FIXED' || sizing.height_mode === 'SCALED')\n       );\n   \n   if (renderImmediately) {\n       renderPlot();\n   }\n   \n   if (!renderImmediately || responsive) {\n       // Set up observer for initial sizing or continuous monitoring\n       var observer = new ResizeObserver(function(entries) {\n           for (let entry of entries) {\n               if (entry.contentBoxSize && \n                   entry.contentBoxSize[0].inlineSize > 0) {\n                   if (!responsive && observer) {\n                       observer.disconnect();\n                       observer = null;\n                   }\n                   renderPlot();\n                   if (!responsive) {\n                       break;\n                   }\n               }\n           }\n       });\n       \n       observer.observe(containerDiv);\n   }\n   \n   // ----------\n   })();\n   \n   </script>\n```\n:::\n:::\n\n\n## Application 2: Worker-Firm Panel --- Two-Way Fixed Effects\n\nWages depend on both *who you are* (worker ability) and *where you work* (firm pay premiums). A two-way fixed effects model separates these (Abowd, Kramarz & Margolis, 1999).\n\n::: {#9434170f .cell execution_count=6}\n``` {.python .cell-code}\npanel = pf.get_worker_panel(N_workers=500, N_firms=50, N_years=11, seed=42)\npanel.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>worker_id</th>\n      <th>firm_id</th>\n      <th>year</th>\n      <th>female</th>\n      <th>experience</th>\n      <th>tenure</th>\n      <th>log_wage</th>\n      <th>worker_fe</th>\n      <th>firm_fe</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0</td>\n      <td>48</td>\n      <td>2000</td>\n      <td>1</td>\n      <td>1</td>\n      <td>1</td>\n      <td>0.406292</td>\n      <td>0.152359</td>\n      <td>0.212055</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1</td>\n      <td>30</td>\n      <td>2000</td>\n      <td>0</td>\n      <td>2</td>\n      <td>1</td>\n      <td>-0.382227</td>\n      <td>-0.519992</td>\n      <td>-0.108531</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2</td>\n      <td>18</td>\n      <td>2000</td>\n      <td>1</td>\n      <td>2</td>\n      <td>1</td>\n      <td>0.411605</td>\n      <td>0.375226</td>\n      <td>0.269345</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>3</td>\n      <td>22</td>\n      <td>2000</td>\n      <td>1</td>\n      <td>0</td>\n      <td>1</td>\n      <td>1.232769</td>\n      <td>0.470282</td>\n      <td>0.400735</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>4</td>\n      <td>8</td>\n      <td>2000</td>\n      <td>1</td>\n      <td>2</td>\n      <td>1</td>\n      <td>-1.335275</td>\n      <td>-0.975518</td>\n      <td>-0.167872</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### One-Way FE: Worker Fixed Effects Only\n\n::: {#5dfa0676 .cell execution_count=7}\n``` {.python .cell-code}\nfit_worker = pf.feols(\"log_wage ~ experience + tenure + female | worker_id\", data=panel)\nfit_worker.summary()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n###\n\nEstimation:  OLS\nDep. var.: log_wage, Fixed effects: worker_id\nInference:  iid\nObservations:  5500\n\n| Coefficient   |   Estimate |   Std. Error |   t value |   Pr(>|t|) |   2.5% |   97.5% |\n|:--------------|-----------:|-------------:|----------:|-----------:|-------:|--------:|\n| experience    |      0.021 |        0.001 |    15.047 |      0.000 |  0.018 |   0.024 |\n| tenure        |      0.013 |        0.002 |     5.330 |      0.000 |  0.008 |   0.017 |\n---\nRMSE: 0.299 R2: 0.776 R2 Within: 0.08 \n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n/Users/afischer/Documents/pyfixest/pyfixest/estimation/feols_.py:2761: UserWarning: \n            1 variables dropped due to multicollinearity.\n            The following variables are dropped: ['female'].\n            \n  warnings.warn(\n```\n:::\n:::\n\n\n### Two-Way FE: Worker + Firm Fixed Effects\n\n::: {#08fb9a2b .cell execution_count=8}\n``` {.python .cell-code}\nfit_twoway = pf.feols(\"log_wage ~ experience + tenure + female | worker_id + firm_id\", data=panel)\nfit_twoway.summary()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n###\n\nEstimation:  OLS\nDep. var.: log_wage, Fixed effects: worker_id+firm_id\nInference:  iid\nObservations:  5500\n\n| Coefficient   |   Estimate |   Std. Error |   t value |   Pr(>|t|) |   2.5% |   97.5% |\n|:--------------|-----------:|-------------:|----------:|-----------:|-------:|--------:|\n| experience    |      0.021 |        0.001 |    22.547 |      0.000 |  0.019 |   0.023 |\n| tenure        |      0.011 |        0.002 |     6.830 |      0.000 |  0.008 |   0.014 |\n---\nRMSE: 0.192 R2: 0.908 R2 Within: 0.159 \n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n/Users/afischer/Documents/pyfixest/pyfixest/estimation/feols_.py:2761: UserWarning: \n            1 variables dropped due to multicollinearity.\n            The following variables are dropped: ['female'].\n            \n  warnings.warn(\n```\n:::\n:::\n\n\n### Adding Year Fixed Effects\n\n::: {#238577eb .cell execution_count=9}\n``` {.python .cell-code}\nfit_full = pf.feols(\"log_wage ~ experience + tenure + female | worker_id + firm_id + year\", data=panel)\nfit_full.summary()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n###\n\nEstimation:  OLS\nDep. var.: log_wage, Fixed effects: worker_id+firm_id+year\nInference:  iid\nObservations:  5500\n\n| Coefficient   |   Estimate |   Std. Error |   t value |   Pr(>|t|) |   2.5% |   97.5% |\n|:--------------|-----------:|-------------:|----------:|-----------:|-------:|--------:|\n| experience    |      0.020 |        0.002 |     9.897 |      0.000 |  0.016 |   0.024 |\n| tenure        |      0.010 |        0.002 |     6.125 |      0.000 |  0.007 |   0.013 |\n---\nRMSE: 0.191 R2: 0.908 R2 Within: 0.027 \n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n/Users/afischer/Documents/pyfixest/pyfixest/estimation/feols_.py:2761: UserWarning: \n            1 variables dropped due to multicollinearity.\n            The following variables are dropped: ['female'].\n            \n  warnings.warn(\n```\n:::\n:::\n\n\n### Compare All Specifications\n\n::: {#bfb08fd8 .cell execution_count=10}\n``` {.python .cell-code}\npf.etable(\n    [fit_worker, fit_twoway, fit_full],\n    labels={\"log_wage\": \"Log Wage\", \"experience\": \"Experience\", \"tenure\": \"Tenure\", \"female\": \"Female\"},\n    felabels={\"worker_id\": \"Worker FE\", \"firm_id\": \"Firm FE\", \"year\": \"Year FE\"},\n    caption=\"Worker-Firm Panel: Adding Fixed Effects Progressively\",\n)\n```\n\n::: {.cell-output .cell-output-display execution_count=10}\n```{=html}\n<div id=\"bqehwbfzsu\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#bqehwbfzsu table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#bqehwbfzsu thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#bqehwbfzsu p { margin: 0; padding: 0; }\n #bqehwbfzsu .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: hidden; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: hidden; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #bqehwbfzsu .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #bqehwbfzsu .gt_title { color: #333333; font-size: 16px; font-weight: initial; padding-top: 6px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #bqehwbfzsu .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 5px; padding-bottom: 7px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #bqehwbfzsu .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #bqehwbfzsu .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #bqehwbfzsu .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #bqehwbfzsu .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 16px; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: bottom; padding-top: 2px; padding-bottom: 7px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #bqehwbfzsu .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 16px; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #bqehwbfzsu .gt_column_spanner_outer:first-child { padding-left: 0; }\n #bqehwbfzsu .gt_column_spanner_outer:last-child { padding-right: 0; }\n #bqehwbfzsu .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; vertical-align: bottom; padding-top: 2px; padding-bottom: 2px; overflow-x: hidden; display: inline-block; width: 100%; }\n #bqehwbfzsu .gt_spanner_row { border-bottom-style: hidden; }\n #bqehwbfzsu .gt_group_heading { padding-top: 0px; padding-bottom: 0px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 0.25px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: white; border-right-style: none; border-right-width: 1px; border-right-color: white; vertical-align: middle; text-align: left; }\n #bqehwbfzsu .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; border-top-style: solid; border-top-width: 0.25px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; vertical-align: middle; }\n #bqehwbfzsu .gt_from_md> :first-child { margin-top: 0; }\n #bqehwbfzsu .gt_from_md> :last-child { margin-bottom: 0; }\n #bqehwbfzsu .gt_row { padding-top: 2px; padding-bottom: 2px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: middle; overflow-x: hidden; }\n #bqehwbfzsu .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 16px; font-weight: initial; text-transform: inherit; border-right-style: hidden; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #bqehwbfzsu .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #bqehwbfzsu .gt_row_group_first td { border-top-width: 0.25px; }\n #bqehwbfzsu .gt_row_group_first th { border-top-width: 0.25px; }\n #bqehwbfzsu .gt_striped { color: #333333; background-color: #F4F4F4; }\n #bqehwbfzsu .gt_table_body { border-top-style: solid; border-top-width: 0px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: black; }\n #bqehwbfzsu .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }\n #bqehwbfzsu .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }\n #bqehwbfzsu .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }\n #bqehwbfzsu .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #bqehwbfzsu .gt_sourcenote { font-size: 10px; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #bqehwbfzsu .gt_left { text-align: left; }\n #bqehwbfzsu .gt_center { text-align: center; }\n #bqehwbfzsu .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #bqehwbfzsu .gt_font_normal { font-weight: normal; }\n #bqehwbfzsu .gt_font_bold { font-weight: bold; }\n #bqehwbfzsu .gt_font_italic { font-style: italic; }\n #bqehwbfzsu .gt_super { font-size: 65%; }\n #bqehwbfzsu .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #bqehwbfzsu .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n<thead>\n\n  <tr class=\"gt_heading\">\n    <td colspan=\"4\" class=\"gt_heading gt_title gt_font_normal\">Worker-Firm Panel: Adding Fixed Effects Progressively</td>\n  </tr>\n<tr class=\"gt_col_headings gt_spanner_row\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"\"></th>\n  <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"3\" scope=\"colgroup\" id=\"Log-Wage\">\n    <span class=\"gt_column_spanner\">Log Wage</span>\n  </th>\n</tr>\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"0\">(1)</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"1\">(2)</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"2\">(3)</th>\n</tr>\n</thead>\n<tbody class=\"gt_table_body\">\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"4\">coef</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Experience</th>\n    <td class=\"gt_row gt_center\">0.021*** <br> (0.001)</td>\n    <td class=\"gt_row gt_center\">0.021*** <br> (0.000921)</td>\n    <td class=\"gt_row gt_center\">0.02*** <br> (0.002)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Tenure</th>\n    <td class=\"gt_row gt_center\">0.013*** <br> (0.002)</td>\n    <td class=\"gt_row gt_center\">0.011*** <br> (0.002)</td>\n    <td class=\"gt_row gt_center\">0.01*** <br> (0.002)</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"4\">fe</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Firm FE</th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">x</td>\n    <td class=\"gt_row gt_center\">x</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Worker FE</th>\n    <td class=\"gt_row gt_center\">x</td>\n    <td class=\"gt_row gt_center\">x</td>\n    <td class=\"gt_row gt_center\">x</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Year FE</th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">x</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"4\">stats</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Observations</th>\n    <td class=\"gt_row gt_center\">5,500</td>\n    <td class=\"gt_row gt_center\">5,500</td>\n    <td class=\"gt_row gt_center\">5,500</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.776</td>\n    <td class=\"gt_row gt_center\">0.908</td>\n    <td class=\"gt_row gt_center\">0.908</td>\n  </tr>\n</tbody>\n  <tfoot class=\"gt_sourcenotes\">\n  \n  <tr>\n    <td class=\"gt_sourcenote\" colspan=\"4\">Significance levels: * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001. Format of coefficient cell: Coefficient   (Std. Error)</td>\n  </tr>\n\n</tfoot>\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\n## Under the Hood: Demeaning\n\nFixed effects estimation works by *demeaning* --- subtracting group means from both sides of the equation. This is equivalent to including dummy variables but far more efficient.\n\nLet's verify this manually with the `pf.get_data()` synthetic data:\n\n::: {#8ff451f2 .cell execution_count=11}\n``` {.python .cell-code}\nimport pandas as pd\n\ndata = pf.get_data()\n\ndef _demean(df, column, by):\n    return df[column] - df.groupby(by)[column].transform(\"mean\")\n\nfit_fe_demo = pf.feols(\"Y ~ X1 | group_id\", data=data, vcov=\"HC1\")\n\nfit_demeaned = pf.feols(\n    \"Y_dm ~ X1_dm\",\n    data=data.assign(\n        Y_dm=lambda df: _demean(df, \"Y\", \"group_id\"),\n        X1_dm=lambda df: _demean(df, \"X1\", \"group_id\"),\n    ),\n    vcov=\"HC1\",\n)\n\npf.etable([fit_fe_demo, fit_demeaned], caption=\"FE via feols() vs Manual Demeaning\")\n```\n\n::: {.cell-output .cell-output-display execution_count=11}\n```{=html}\n<div id=\"zlzquianfz\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#zlzquianfz table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#zlzquianfz thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#zlzquianfz p { margin: 0; padding: 0; }\n #zlzquianfz .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: hidden; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: hidden; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #zlzquianfz .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #zlzquianfz .gt_title { color: #333333; font-size: 16px; font-weight: initial; padding-top: 6px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #zlzquianfz .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 5px; padding-bottom: 7px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #zlzquianfz .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #zlzquianfz .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #zlzquianfz .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #zlzquianfz .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 16px; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: bottom; padding-top: 2px; padding-bottom: 7px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #zlzquianfz .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 16px; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #zlzquianfz .gt_column_spanner_outer:first-child { padding-left: 0; }\n #zlzquianfz .gt_column_spanner_outer:last-child { padding-right: 0; }\n #zlzquianfz .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; vertical-align: bottom; padding-top: 2px; padding-bottom: 2px; overflow-x: hidden; display: inline-block; width: 100%; }\n #zlzquianfz .gt_spanner_row { border-bottom-style: hidden; }\n #zlzquianfz .gt_group_heading { padding-top: 0px; padding-bottom: 0px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 0.25px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: white; border-right-style: none; border-right-width: 1px; border-right-color: white; vertical-align: middle; text-align: left; }\n #zlzquianfz .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; border-top-style: solid; border-top-width: 0.25px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.25px; border-bottom-color: black; vertical-align: middle; }\n #zlzquianfz .gt_from_md> :first-child { margin-top: 0; }\n #zlzquianfz .gt_from_md> :last-child { margin-bottom: 0; }\n #zlzquianfz .gt_row { padding-top: 2px; padding-bottom: 2px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: middle; overflow-x: hidden; }\n #zlzquianfz .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 16px; font-weight: initial; text-transform: inherit; border-right-style: hidden; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #zlzquianfz .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #zlzquianfz .gt_row_group_first td { border-top-width: 0.25px; }\n #zlzquianfz .gt_row_group_first th { border-top-width: 0.25px; }\n #zlzquianfz .gt_striped { color: #333333; background-color: #F4F4F4; }\n #zlzquianfz .gt_table_body { border-top-style: solid; border-top-width: 0px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: black; }\n #zlzquianfz .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }\n #zlzquianfz .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }\n #zlzquianfz .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }\n #zlzquianfz .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #zlzquianfz .gt_sourcenote { font-size: 10px; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #zlzquianfz .gt_left { text-align: left; }\n #zlzquianfz .gt_center { text-align: center; }\n #zlzquianfz .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #zlzquianfz .gt_font_normal { font-weight: normal; }\n #zlzquianfz .gt_font_bold { font-weight: bold; }\n #zlzquianfz .gt_font_italic { font-style: italic; }\n #zlzquianfz .gt_super { font-size: 65%; }\n #zlzquianfz .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #zlzquianfz .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n<thead>\n\n  <tr class=\"gt_heading\">\n    <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal\">FE via feols() vs Manual Demeaning</td>\n  </tr>\n<tr class=\"gt_col_headings gt_spanner_row\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"\"></th>\n  <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Y\">\n    <span class=\"gt_column_spanner\">Y</span>\n  </th>\n  <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Y_dm\">\n    <span class=\"gt_column_spanner\">Y_dm</span>\n  </th>\n</tr>\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"0\">(1)</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"1\">(2)</th>\n</tr>\n</thead>\n<tbody class=\"gt_table_body\">\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">coef</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">X1</th>\n    <td class=\"gt_row gt_center\">-1.019*** <br> (0.083)</td>\n    <td class=\"gt_row gt_center\"></td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">X1_dm</th>\n    <td class=\"gt_row gt_center\"></td>\n    <td class=\"gt_row gt_center\">-1.019*** <br> (0.083)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Intercept</th>\n    <td class=\"gt_row gt_center\"></td>\n    <td class=\"gt_row gt_center\">0.003 <br> (0.068)</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">fe</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">group_id</th>\n    <td class=\"gt_row gt_center\">x</td>\n    <td class=\"gt_row gt_center\">-</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">stats</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Observations</th>\n    <td class=\"gt_row gt_center\">998</td>\n    <td class=\"gt_row gt_center\">998</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.137</td>\n    <td class=\"gt_row gt_center\">0.126</td>\n  </tr>\n</tbody>\n  <tfoot class=\"gt_sourcenotes\">\n  \n  <tr>\n    <td class=\"gt_sourcenote\" colspan=\"3\">Significance levels: * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001. Format of coefficient cell: Coefficient   (Std. Error)</td>\n  </tr>\n\n</tfoot>\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\nThe coefficients are identical. `PyFixest` uses the same logic but scales to millions of observations and multiple high-dimensional fixed effects.\n\n::: {.callout-tip}\n## Next Steps\n- [Standard Errors & Inference](standard-errors.qmd) --- learn about robust, cluster-robust, and bootstrap inference.\n- [Regression Tables](regression-tables.qmd) --- customize publication-ready output tables.\n:::\n\n",
    "supporting": [
      "ols-fixed-effects_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}