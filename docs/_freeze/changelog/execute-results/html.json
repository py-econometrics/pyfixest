{
  "hash": "ea9569682c69badb757279027a5d2929",
  "result": {
    "engine": "jupyter",
    "markdown": "---\nfreeze: auto\ntitle: PyFixest 0.41.0 (In Development)\n---\n\n\n\n# Changelog\n\n::: {#c239aeeb .cell execution_count=1}\n``` {.python .cell-code}\nimport pyfixest as pf\nfrom pyfixest.report.utils import rename_categoricals\n\ndf = pf.get_data()\n\nfit1 = pf.feols(\"Y ~ X1\", data = df)\nfit2 = pf.feols(\"Y ~ X1 + X2\", data = df)\nfit3 = pf.feols(\"Y ~ X1 + X2 | f1\", data = df)\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n\n            <div id=\"Ct0zkr\"></div>\n            <script type=\"text/javascript\" data-lets-plot-script=\"library\">\n                if(!window.letsPlotCallQueue) {\n                    window.letsPlotCallQueue = [];\n                }; \n                window.letsPlotCall = function(f) {\n                    window.letsPlotCallQueue.push(f);\n                };\n                (function() {\n                    var script = document.createElement(\"script\");\n                    script.type = \"text/javascript\";\n                    script.src = \"https://cdn.jsdelivr.net/gh/JetBrains/lets-plot@v4.7.3/js-package/distr/lets-plot.min.js\";\n                    script.onload = function() {\n                        window.letsPlotCall = function(f) {f();};\n                        window.letsPlotCallQueue.forEach(function(f) {f();});\n                        window.letsPlotCallQueue = [];\n                        \n                    };\n                    script.onerror = function(event) {\n                        window.letsPlotCall = function(f) {};    // noop\n                        window.letsPlotCallQueue = [];\n                        var div = document.createElement(\"div\");\n                        div.style.color = 'darkred';\n                        div.textContent = 'Error loading Lets-Plot JS';\n                        document.getElementById(\"Ct0zkr\").appendChild(div);\n                    };\n                    var e = document.getElementById(\"Ct0zkr\");\n                    e.appendChild(script);\n                })()\n            </script>\n            \n```\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n\n            <div id=\"B24tEj\"></div>\n            <script type=\"text/javascript\" data-lets-plot-script=\"library\">\n                if(!window.letsPlotCallQueue) {\n                    window.letsPlotCallQueue = [];\n                }; \n                window.letsPlotCall = function(f) {\n                    window.letsPlotCallQueue.push(f);\n                };\n                (function() {\n                    var script = document.createElement(\"script\");\n                    script.type = \"text/javascript\";\n                    script.src = \"https://cdn.jsdelivr.net/gh/JetBrains/lets-plot@v4.7.3/js-package/distr/lets-plot.min.js\";\n                    script.onload = function() {\n                        window.letsPlotCall = function(f) {f();};\n                        window.letsPlotCallQueue.forEach(function(f) {f();});\n                        window.letsPlotCallQueue = [];\n                        \n                    };\n                    script.onerror = function(event) {\n                        window.letsPlotCall = function(f) {};    // noop\n                        window.letsPlotCallQueue = [];\n                        var div = document.createElement(\"div\");\n                        div.style.color = 'darkred';\n                        div.textContent = 'Error loading Lets-Plot JS';\n                        document.getElementById(\"B24tEj\").appendChild(div);\n                    };\n                    var e = document.getElementById(\"B24tEj\");\n                    e.appendChild(script);\n                })()\n            </script>\n            \n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nOMP: Info #276: omp_set_nested routine deprecated, please use omp_set_max_active_levels instead.\n```\n:::\n:::\n\n\n\n- Adds the following statistics to the `Fepois` class: `_loglik`, `_loglik_null`, `_pseudo_r2` for regression without weights.\n- Set the default parameters for the MAP algorithm to a tolerance of `1e-06` and maximum number of iterations of `10_000`.\n- Adds support for weights for poisson regression via `feopis()`.\n\n## PyFixest 0.40.1\n\n### Breaking Changes for compatibility with `fixest` 0.13\n\n`fixest` 0.13 has recently been released to CRAN, with a range of breaking changes. We are following these in pyfixet 0.40.0.\n\n- The default inference method is now always \"iid\". Before, both `fixest` and `pyfixest` would default to cluster by the first fixest effect\n  in the presence of fixed effect.\n- The arguments of the `pf.ssc()` functions have been renamed: `adj` becomes `k_adj`, `fixef_k` becomes `k_fixef`, `cluster_df` becomes `G_df`, and `cluster_adj` becomes `G_adj`.\n  Backwards compatibility is ensured.\n- `fixest` no longer applies the `G/(G-1)` small sample correction for heteroskedastic errors. The argument is now only relevant for cluster robust errors.\n- If the `k_adj` arg is set to `True` with heteroskedastic errors, the applied small sample correction now is `N / (N-k)` and no longer `(N-1) / (N-df_k)`,\n  as was previously the case and is still the case for iid and cluster robust errors.\n- The `k_fixef` option `\"nested\"` has been renamed to `\"nonnested\"`.\n- The `fixef_rm` argument is changed from default `\"none\"` to `\"singleton\"` for all estimation functions. This has no impact on point estimates, but might change inference due to a smaller number of\n  observations in the degree of freedom correction.\n- The multicollinearity default tolerance has been reduced from 1e-10 to 1e-09.\n- The attribute `_dof_k` has been renamed to `_df_k`.\n\nOther related changes:\n- The arguments to adjust the small samples for the `wildboottest` methods have been renamed to `k_adj` and `G_adj`.\n\n### Moved to `pixi.toml` and install from conda-forge\n\nWe have been using pixi as our package manager for a while and are moving from a `pyproject.toml` to using a `pixi.toml` for specifying dependencies.\nWe also install all package by default from the free and open source conda-forge. Because of some environment resolution challenges around an old version of\n`rpy2`that we need for testing `pyfixest` against `fixest`, we temporarily have dropped support for the dev and docs environments for windows. A fix is\nwork in progress.\n\n## New Features\n\n### CuPy and SciPy Backends via LSMR\n\nWe add CuPy and SciPy Backend to run the demeaning algorithm on the GPU via the sparse LSMR solver. For problems\nwhere the standard demeaner struggles to converge, this strategy can lead to significant speedups if paired with a GPU.\n\n![Complex Fixed Effects Benchmark](https://raw.githubusercontent.com/py-econometrics/pyfixest/master/benchmarks/complex_benchmarks.png)\n\n### HAC Standard Errors\n\nWe now support HAC standard errors! Thanks for Daman (https://github.com/damandhaliwal) for all his work (and coping with me with the PR, which took forever to get through).\nWe now support:\n\n- time series HAC\n- panel HAC\n- panel DK\n\nvariance-covariance matrices.\n\nFor now, we assume that the time series column is consecutive and each entry has \"time delta 1\". Relaxation of this requirement are work in progress.\n\n### `cat_template` argument for plotting functions\n\nFor easier encoding of categorical variables in relation to the `iplot()` and `coefplot()` functions, we add a new function argument, cat_template:\n\n\n::: {#8f710d6a .cell execution_count=2}\n``` {.python .cell-code}\nfit_c = pf.feols(fml = \"Y ~ i(X1, f1)\", data = df)\nfit_c.iplot(cat_template = \"{variable}::{value}\")\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n   <div id=\"LFYTU3\"></div>\n   <script type=\"text/javascript\" data-lets-plot-script=\"plot\">\n   \n   (function() {\n   // ----------\n   \n   const forceImmediateRender = false;\n   const responsive = false;\n   \n   let sizing = {\n       width_mode: \"MIN\",\n       height_mode: \"SCALED\",\n       width: null, \n       height: null \n   };\n   \n   const preferredWidth = document.body.dataset.letsPlotPreferredWidth;\n   if (preferredWidth !== undefined) {\n       sizing = {\n           width_mode: 'FIXED',\n           height_mode: 'SCALED',\n           width: parseFloat(preferredWidth)\n       };\n   }\n   \n   const containerDiv = document.getElementById(\"LFYTU3\");\n   let fig = null;\n   \n   function renderPlot() {\n       if (fig === null) {\n           const plotSpec = {\n\"data\":{\n\"Coefficient\":[\"X1::0.0\",\"X1::1.0\",\"X1::2.0\"],\n\"Estimate\":[0.06080384758242513,0.015545052633916258,-0.047325666018677354],\n\"2.5%\":[0.04065684278197734,-0.003973305785076537,-0.06607275597434355],\n\"97.5%\":[0.08095085238287292,0.035063411052909055,-0.02857857606301116],\n\"Model\":[\"Y~i(X1,f1)\",\"Y~i(X1,f1)\",\"Y~i(X1,f1)\"]\n},\n\"mapping\":{\n\"x\":\"Coefficient\",\n\"y\":\"Estimate\",\n\"color\":\"Model\"\n},\n\"data_meta\":{\n\"series_annotations\":[{\n\"type\":\"int\",\n\"column\":\"level_0\"\n},{\n\"type\":\"int\",\n\"column\":\"index\"\n},{\n\"type\":\"str\",\n\"column\":\"Coefficient\"\n},{\n\"type\":\"float\",\n\"column\":\"Estimate\"\n},{\n\"type\":\"float\",\n\"column\":\"Std. Error\"\n},{\n\"type\":\"float\",\n\"column\":\"t value\"\n},{\n\"type\":\"float\",\n\"column\":\"Pr(>|t|)\"\n},{\n\"type\":\"float\",\n\"column\":\"2.5%\"\n},{\n\"type\":\"float\",\n\"column\":\"97.5%\"\n},{\n\"type\":\"str\",\n\"column\":\"Model\"\n}]\n},\n\"guides\":{\n\"y\":{\n\"title\":\"Estimate and 95.0% Confidence Interval\"\n}\n},\n\"coord\":{\n\"name\":\"flip\",\n\"flip\":true\n},\n\"ggsize\":{\n\"width\":500.0,\n\"height\":300.0\n},\n\"theme\":{\n\"axis_text_x\":{\n\"angle\":0.0,\n\"blank\":false\n}\n},\n\"kind\":\"plot\",\n\"scales\":[],\n\"layers\":[{\n\"geom\":\"point\",\n\"mapping\":{\n},\n\"position\":{\n\"name\":\"dodge\",\n\"width\":0.5\n},\n\"data_meta\":{\n},\n\"data\":{\n}\n},{\n\"geom\":\"errorbar\",\n\"mapping\":{\n\"ymin\":\"2.5%\",\n\"ymax\":\"97.5%\"\n},\n\"position\":{\n\"name\":\"dodge\",\n\"width\":0.5\n},\n\"data_meta\":{\n},\n\"width\":0.05,\n\"data\":{\n}\n}],\n\"metainfo_list\":[],\n\"spec_id\":\"1\"\n};\n           window.letsPlotCall(function() { fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, containerDiv, sizing); });\n       } else {\n           fig.updateView({});\n       }\n   }\n   \n   const renderImmediately = \n       forceImmediateRender || (\n           sizing.width_mode === 'FIXED' && \n           (sizing.height_mode === 'FIXED' || sizing.height_mode === 'SCALED')\n       );\n   \n   if (renderImmediately) {\n       renderPlot();\n   }\n   \n   if (!renderImmediately || responsive) {\n       // Set up observer for initial sizing or continuous monitoring\n       var observer = new ResizeObserver(function(entries) {\n           for (let entry of entries) {\n               if (entry.contentBoxSize && \n                   entry.contentBoxSize[0].inlineSize > 0) {\n                   if (!responsive && observer) {\n                       observer.disconnect();\n                       observer = null;\n                   }\n                   renderPlot();\n                   if (!responsive) {\n                       break;\n                   }\n               }\n           }\n       });\n       \n       observer.observe(containerDiv);\n   }\n   \n   // ----------\n   })();\n   \n   </script>\n```\n:::\n:::\n\n\nThis is particularly useful for Difference-in-Differences and event studies. You can find an example use case in the DiD [vignette](https://py-econometrics.github.io/pyfixest/difference-in-differences.html#one-shot-adoption-static-and-dynamic-specifications).\n\nGoing forward, we will deprecate the `rename_event_study_coefs` function, which is no longer needed (and did not work anyways).\n\n### Updates to Gelbach Decomposition\n\nWe have reworked the Gelbach Decomposition method, with some breaking changes: by default, calling `Feols.decompose()` now returns a `GelbachDecomposition` instance - before, we'd return a `pd.DataFrame`. The `param` argument has been renamed to `decomp_var`, but is not yet deprecated.\n\nThe class now comes with new `tidy()` and `etable()` methods.\n\n::: {#d652b013 .cell execution_count=3}\n``` {.python .cell-code}\nfrom pyfixest.utils.dgps import gelbach_data\nimport numpy as np\nimport pyfixest as pf\n\n# Generate test data using gelbach_data\ndata = gelbach_data(nobs=500)\ndata[\"w\"] = np.random.rand(500)\nfit = pf.feols(\"y ~ x1 + x21 + x22 + x23\", data=data)\ngb = fit.decompose(decomp_var = \"x1\", x1_vars = [\"x21\"],reps = 10, nthreads = 1)\nprint(type(gb))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\r  0%|          | 0/10 [00:00<?, ?it/s]\r100%|██████████| 10/10 [00:00<00:00, 855.44it/s]\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'pyfixest.estimation.decomposition.GelbachDecomposition'>\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\n```\n:::\n:::\n\n\nIt is now also possible to add background variables that are included in both the long and short regressions via the `x1_vars` function argument.\n\nWe can inspect results as a `pd.DataFrame`\n\n::: {#a23d8d7c .cell execution_count=4}\n``` {.python .cell-code}\ngb.tidy()\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>coefficients</th>\n      <th>ci_lower</th>\n      <th>ci_upper</th>\n      <th>panels</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>direct_effect</th>\n      <td>1.412165</td>\n      <td>0.784534</td>\n      <td>1.777011</td>\n      <td>Levels (units)</td>\n    </tr>\n    <tr>\n      <th>full_effect</th>\n      <td>1.041753</td>\n      <td>0.995789</td>\n      <td>1.100837</td>\n      <td>Levels (units)</td>\n    </tr>\n    <tr>\n      <th>explained_effect</th>\n      <td>0.370412</td>\n      <td>-0.267119</td>\n      <td>0.723744</td>\n      <td>Levels (units)</td>\n    </tr>\n    <tr>\n      <th>unexplained_effect</th>\n      <td>1.041753</td>\n      <td>0.995789</td>\n      <td>1.100837</td>\n      <td>Levels (units)</td>\n    </tr>\n    <tr>\n      <th>x22</th>\n      <td>0.061930</td>\n      <td>-0.350993</td>\n      <td>0.291994</td>\n      <td>Levels (units)</td>\n    </tr>\n    <tr>\n      <th>x23</th>\n      <td>0.308483</td>\n      <td>0.083874</td>\n      <td>0.449846</td>\n      <td>Levels (units)</td>\n    </tr>\n    <tr>\n      <th>direct_effect</th>\n      <td>1.000000</td>\n      <td>1.000000</td>\n      <td>1.000000</td>\n      <td>Share of Full Effect</td>\n    </tr>\n    <tr>\n      <th>full_effect</th>\n      <td>0.737699</td>\n      <td>0.592728</td>\n      <td>1.407937</td>\n      <td>Share of Full Effect</td>\n    </tr>\n    <tr>\n      <th>explained_effect</th>\n      <td>0.262301</td>\n      <td>-0.407937</td>\n      <td>0.407272</td>\n      <td>Share of Full Effect</td>\n    </tr>\n    <tr>\n      <th>unexplained_effect</th>\n      <td>0.737699</td>\n      <td>0.592728</td>\n      <td>1.407937</td>\n      <td>Share of Full Effect</td>\n    </tr>\n    <tr>\n      <th>x22</th>\n      <td>0.043855</td>\n      <td>-0.498382</td>\n      <td>0.164303</td>\n      <td>Share of Full Effect</td>\n    </tr>\n    <tr>\n      <th>x23</th>\n      <td>0.218446</td>\n      <td>0.087064</td>\n      <td>0.260587</td>\n      <td>Share of Full Effect</td>\n    </tr>\n    <tr>\n      <th>direct_effect</th>\n      <td>3.812414</td>\n      <td>-0.864084</td>\n      <td>10.381888</td>\n      <td>Share of Explained Effect</td>\n    </tr>\n    <tr>\n      <th>full_effect</th>\n      <td>2.812414</td>\n      <td>-1.864084</td>\n      <td>9.381888</td>\n      <td>Share of Explained Effect</td>\n    </tr>\n    <tr>\n      <th>explained_effect</th>\n      <td>1.000000</td>\n      <td>1.000000</td>\n      <td>1.000000</td>\n      <td>Share of Explained Effect</td>\n    </tr>\n    <tr>\n      <th>unexplained_effect</th>\n      <td>2.812414</td>\n      <td>-1.864084</td>\n      <td>9.381888</td>\n      <td>Share of Explained Effect</td>\n    </tr>\n    <tr>\n      <th>x22</th>\n      <td>0.167192</td>\n      <td>-1.194968</td>\n      <td>0.948694</td>\n      <td>Share of Explained Effect</td>\n    </tr>\n    <tr>\n      <th>x23</th>\n      <td>0.832808</td>\n      <td>0.051306</td>\n      <td>2.194968</td>\n      <td>Share of Explained Effect</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nor produce a `GT` table:\n\n::: {#6755d686 .cell execution_count=5}\n``` {.python .cell-code}\ngb.etable(\n    stats = \"all\",\n    caption = \"Gelbach Decomposition\"\n)\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```{=html}\n<div id=\"tbxjycamda\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#tbxjycamda table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#tbxjycamda thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#tbxjycamda p { margin: 0; padding: 0; }\n #tbxjycamda .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: hidden; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: hidden; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #tbxjycamda .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #tbxjycamda .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #tbxjycamda .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #tbxjycamda .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #tbxjycamda .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #tbxjycamda .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #tbxjycamda .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: bottom; padding-top: 4px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #tbxjycamda .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #tbxjycamda .gt_column_spanner_outer:first-child { padding-left: 0; }\n #tbxjycamda .gt_column_spanner_outer:last-child { padding-right: 0; }\n #tbxjycamda .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: bottom; padding-top: 4px; padding-bottom: 4px; overflow-x: hidden; display: inline-block; width: 100%; }\n #tbxjycamda .gt_spanner_row { border-bottom-style: hidden; }\n #tbxjycamda .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: none; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: white; border-right-style: none; border-right-width: 1px; border-right-color: white; vertical-align: middle; text-align: left; }\n #tbxjycamda .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: none; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: middle; }\n #tbxjycamda .gt_from_md> :first-child { margin-top: 0; }\n #tbxjycamda .gt_from_md> :last-child { margin-bottom: 0; }\n #tbxjycamda .gt_row { padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: middle; overflow-x: hidden; }\n #tbxjycamda .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: hidden; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #tbxjycamda .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #tbxjycamda .gt_row_group_first td { border-top-width: 0.5px; }\n #tbxjycamda .gt_row_group_first th { border-top-width: 0.5px; }\n #tbxjycamda .gt_striped { color: #333333; background-color: #F4F4F4; }\n #tbxjycamda .gt_table_body { border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: black; }\n #tbxjycamda .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }\n #tbxjycamda .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }\n #tbxjycamda .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }\n #tbxjycamda .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #tbxjycamda .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #tbxjycamda .gt_left { text-align: left; }\n #tbxjycamda .gt_center { text-align: center; }\n #tbxjycamda .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #tbxjycamda .gt_font_normal { font-weight: normal; }\n #tbxjycamda .gt_font_bold { font-weight: bold; }\n #tbxjycamda .gt_font_italic { font-style: italic; }\n #tbxjycamda .gt_super { font-size: 65%; }\n #tbxjycamda .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #tbxjycamda .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n<thead>\n\n  <tr class=\"gt_heading\">\n    <td colspan=\"4\" class=\"gt_heading gt_title gt_font_normal\">Gelbach Decomposition</td>\n  </tr>\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"\"></th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Initial-Difference\">Initial Difference</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Adjusted-Difference\">Adjusted Difference</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Explained-Difference\">Explained Difference</th>\n</tr>\n</thead>\n<tbody class=\"gt_table_body\">\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"4\">Levels (units)</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">x1</th>\n    <td class=\"gt_row gt_center\">1.412</td>\n    <td class=\"gt_row gt_center\">1.042</td>\n    <td class=\"gt_row gt_center\">0.370</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\"></th>\n    <td class=\"gt_row gt_center\">[0.785, 1.777]</td>\n    <td class=\"gt_row gt_center\">[0.996, 1.101]</td>\n    <td class=\"gt_row gt_center\">[-0.267, 0.724]</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">x22</th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">0.062</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\"></th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">[-0.351, 0.292]</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">x23</th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">0.308</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\"></th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">[0.084, 0.450]</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"4\">Share of Full Effect</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">x1</th>\n    <td class=\"gt_row gt_center\">1.000</td>\n    <td class=\"gt_row gt_center\">0.738</td>\n    <td class=\"gt_row gt_center\">0.262</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\"></th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">[0.593, 1.408]</td>\n    <td class=\"gt_row gt_center\">[-0.408, 0.407]</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">x22</th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">0.044</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\"></th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">[-0.498, 0.164]</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">x23</th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">0.218</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\"></th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">[0.087, 0.261]</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"4\">Share of Explained Effect</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">x1</th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">1.000</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">x22</th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">0.167</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\"></th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">[-1.195, 0.949]</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">x23</th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">0.833</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\"></th>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">-</td>\n    <td class=\"gt_row gt_center\">[0.051, 2.195]</td>\n  </tr>\n</tbody>\n  <tfoot class=\"gt_sourcenotes\">\n  \n  <tr>\n    <td class=\"gt_sourcenote\" colspan=\"4\">\n            Decomposition variable: x1.\n        \n            Control Variables: x21.\n            \n                CIs are computed using B = 10 bootstrap replications\n             using iid sampling.Col 1: Adjusted Difference (by x21) - Coefficient on x1 in short regression.\nCol 2: Adjusted Difference - Coefficient on x1 in long regression.\nCol 3: Explained Difference - Difference in coefficients of x1 in short and long regression.\nPanel 1: Levels (units).\nPanel 2: Share of Full Effect: Levels normalized by coefficient of the short regression.\nPanel 3: Share of Explained Effect: Levels normalized by coefficient of the long regression.</td>\n  </tr>\n\n</tfoot>\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\nAs can be seen, we by default now return normalized (and not just absolute) effects.\n\nWe are now also supporting frequency weights for the decomposition (currently without inference).\n\nAdditionally, some house keeping and interal refactoring of the `GelbachDecomposition` class.\n\n## PyFixest 0.30.0\n\n### New Features\n\n- We have created a **Rust** backend for all performance critical algorithms, with pretty great performance improvements! You can use the Rust backend by setting `demeaner_options = \"rust\"`.\n\nWe find pretty great performance improvements and want to make the Rust backend the default in PyFixest 0.31.0.\n\nTo back up the performance claim, here is a benchmark:\n\n::: {#0864354f .cell execution_count=6}\n``` {.python .cell-code}\nimport pyfixest as pf\nimport numpy as np\nimport pandas as pd\nimport time\n\nrng = np.random.default_rng(737)\n\nN = 10_000_000\nbenchmark_data = pd.DataFrame({\n  \"Y\": rng.normal(0, 1, N),\n  \"X1\": rng.normal(0, 1, N),\n  \"X2\": rng.normal(0, 1, N),\n  \"X3\": rng.normal(0, 1, N),\n  \"f1\": rng.integers(0, 10_000, N),\n  \"f2\": rng.integers(0, 1_000, N),\n  \"f3\": rng.integers(0, 10, N),\n})\n\n# burn-in for numba\nfit_nb_warmup = pf.feols(\n  fml = \"Y ~ X1 + X2 + X3 | f1 + f2 + f3\", data = benchmark_data[:100_000]\n)\n\n# benchmark for numba backend\ntic = time.time()\nfit_nb = pf.feols(\n  fml = \"Y ~ X1 + X2 + X3 | f1 + f2 + f3\", data = benchmark_data\n)\ntoc = time.time()\nprint(f\"Numba backend took {toc-tic}.\")\n\n# benchmark for rust backend\ntic = time.time()\nfit_rust = pf.feols(\n  fml = \"Y ~ X1 + X2 + X3 | f1 + f2 + f3\", data = benchmark_data,\n  demeaner_backend = \"rust\"\n)\ntoc = time.time()\nprint(f\"Rust backend took {toc-tic}.\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/Users/afischer/Documents/pyfixest/pyfixest/estimation/model_matrix_fixest_.py:215: UserWarning: 1 singleton fixed effect(s) detected. These observations are dropped from the model.\n  warnings.warn(\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nNumba backend took 2.8481252193450928.\nRust backend took 3.7258472442626953.\n```\n:::\n:::\n\n\nResults are also matching =)\n\n::: {#38f8440f .cell execution_count=7}\n``` {.python .cell-code}\npf.etable([fit_nb, fit_rust], digits = 8)\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<div id=\"lckmogmhiz\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#lckmogmhiz table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#lckmogmhiz thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#lckmogmhiz p { margin: 0; padding: 0; }\n #lckmogmhiz .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: hidden; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #lckmogmhiz .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #lckmogmhiz .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #lckmogmhiz .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #lckmogmhiz .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #lckmogmhiz .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #lckmogmhiz .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #lckmogmhiz .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: bottom; padding-top: 4px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #lckmogmhiz .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #lckmogmhiz .gt_column_spanner_outer:first-child { padding-left: 0; }\n #lckmogmhiz .gt_column_spanner_outer:last-child { padding-right: 0; }\n #lckmogmhiz .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: bottom; padding-top: 4px; padding-bottom: 4px; overflow-x: hidden; display: inline-block; width: 100%; }\n #lckmogmhiz .gt_spanner_row { border-bottom-style: hidden; }\n #lckmogmhiz .gt_group_heading { padding-top: 0px; padding-bottom: 0px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: white; border-right-style: none; border-right-width: 1px; border-right-color: white; vertical-align: middle; text-align: left; }\n #lckmogmhiz .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: middle; }\n #lckmogmhiz .gt_from_md> :first-child { margin-top: 0; }\n #lckmogmhiz .gt_from_md> :last-child { margin-bottom: 0; }\n #lckmogmhiz .gt_row { padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: middle; overflow-x: hidden; }\n #lckmogmhiz .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: hidden; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #lckmogmhiz .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #lckmogmhiz .gt_row_group_first td { border-top-width: 0.5px; }\n #lckmogmhiz .gt_row_group_first th { border-top-width: 0.5px; }\n #lckmogmhiz .gt_striped { color: #333333; background-color: #F4F4F4; }\n #lckmogmhiz .gt_table_body { border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: black; }\n #lckmogmhiz .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }\n #lckmogmhiz .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }\n #lckmogmhiz .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }\n #lckmogmhiz .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #lckmogmhiz .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #lckmogmhiz .gt_left { text-align: left; }\n #lckmogmhiz .gt_center { text-align: center; }\n #lckmogmhiz .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #lckmogmhiz .gt_font_normal { font-weight: normal; }\n #lckmogmhiz .gt_font_bold { font-weight: bold; }\n #lckmogmhiz .gt_font_italic { font-style: italic; }\n #lckmogmhiz .gt_super { font-size: 65%; }\n #lckmogmhiz .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #lckmogmhiz .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n<thead>\n\n<tr class=\"gt_col_headings gt_spanner_row\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"\"></th>\n  <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"Y\">\n    <span class=\"gt_column_spanner\">Y</span>\n  </th>\n</tr>\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"0\">(1)</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"1\">(2)</th>\n</tr>\n</thead>\n<tbody class=\"gt_table_body\">\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">coef</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">X1</th>\n    <td class=\"gt_row gt_center\">0.00022257 <br> (0.00031662)</td>\n    <td class=\"gt_row gt_center\">0.00022257 <br> (0.00031662)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">X2</th>\n    <td class=\"gt_row gt_center\">0.00020980 <br> (0.00031647)</td>\n    <td class=\"gt_row gt_center\">0.00020980 <br> (0.00031647)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">X3</th>\n    <td class=\"gt_row gt_center\">0.00062145* <br> (0.00031651)</td>\n    <td class=\"gt_row gt_center\">0.00062145* <br> (0.00031651)</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">fe</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">f2</th>\n    <td class=\"gt_row gt_center\">x</td>\n    <td class=\"gt_row gt_center\">x</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">f1</th>\n    <td class=\"gt_row gt_center\">x</td>\n    <td class=\"gt_row gt_center\">x</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">f3</th>\n    <td class=\"gt_row gt_center\">x</td>\n    <td class=\"gt_row gt_center\">x</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">stats</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Observations</th>\n    <td class=\"gt_row gt_center\">10000000</td>\n    <td class=\"gt_row gt_center\">10000000</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">S.E. type</th>\n    <td class=\"gt_row gt_center\">iid</td>\n    <td class=\"gt_row gt_center\">iid</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.00111366</td>\n    <td class=\"gt_row gt_center\">0.00111366</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">R<sup>2</sup> Within</th>\n    <td class=\"gt_row gt_center\">4.8e-07000</td>\n    <td class=\"gt_row gt_center\">4.8e-07000</td>\n  </tr>\n</tbody>\n  <tfoot class=\"gt_sourcenotes\">\n  \n  <tr>\n    <td class=\"gt_sourcenote\" colspan=\"3\">Significance levels: * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001. Format of coefficient cell:\nCoefficient \n (Std. Error)</td>\n  </tr>\n\n</tfoot>\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\n- We now support **quantile regression**, including a Frisch-Newton Interior Point Solver with and without preprocessing, iid, heteroskedastic and cluster robust standard errors, fast algorithms for the entire quantile regression process, and some visualisations. In particular the algorithms for the quantile regression process show excellent performance. You can\nlearn more about all features and take a look at more systematic benchmarks in the [quantreg vignette](https://py-econometrics.github.io/pyfixest/quantile-regression.html).\n\n::: {#74987e36 .cell execution_count=8}\n``` {.python .cell-code}\nN_qr = 10_000\nrng = np.random.default_rng(929)\n\ndf_qr = pd.DataFrame({\n  \"X1\": rng.normal(0, 1, N_qr),\n  \"X2\": rng.normal(0, 1, N_qr)\n})\ndf_qr[\"Y\"] = -0.5 + -2 * df_qr[\"X1\"] + 1.9 * df_qr[\"X1\"] ** 4 + df_qr[\"X2\"] - 0.4 * df_qr[\"X2\"] **7 + rng.normal(0, 1, N_qr)\n\nfit_qr = pf.quantreg(\n  fml = \"Y ~ X1 + X2\",\n  data = df_qr,\n  quantile = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9],\n  method = \"pfn\",\n  multi_method = \"cfm2\"\n)\n\npf.qplot(fit_qr, figsize = [7,3])\n```\n:::\n\n\n- We have switched the **default solver** to `scipy.linalg.solve()`: [link](https://github.com/py-econometrics/pyfixest/pull/904)\n\n- You can now set the **maximum number of iterations** for the demeaning algo via a `fixef_maxiter` argument: [link](https://github.com/py-econometrics/pyfixest/pull/944)\n\n### Bug Fixes\n\n- We fixed a bug in internal renaming of categoricals: [link](https://github.com/py-econometrics/pyfixest/pull/886)\n- We fixed a bug in etable arguments [link](https://github.com/py-econometrics/pyfixest/pull/889)\n- We stopped casting dependent variable to integer to void Information Loss in Poisson Regression: [link](https://github.com/py-econometrics/pyfixest/pull/900)\n\n\n### Documentation\n\n- We have added a guide on how to replicate Stata results with pyfixest: [link](https://github.com/py-econometrics/pyfixest/pull/897)\n- We improved the documentation on how to relabel variable names in the plotting and etable functions: [link](https://github.com/py-econometrics/pyfixest/pull/895)\n\n## Infrastructure\n\n- We have reorganized our tests and rely more on conda environments for making R package test dependencies available: [link](https://github.com/py-econometrics/pyfixest/pull/906)\n\n### Community\n\n- We have added a Code of Conduct.\n- We have opened our discord community. Please join us there to discuss pyfixest and other py-econometrics projects! Link [here](https://discord.com/invite/gBAydeDMVK).\n\n## New Contributors\n* @FuZhiyu made their first contribution in https://github.com/py-econometrics/pyfixest/pull/886\n* @mortizm1988 made their first contribution in https://github.com/py-econometrics/pyfixest/pull/895\n* @jestover made their first contribution in https://github.com/py-econometrics/pyfixest/pull/897\n* @JaapCTJ made their first contribution in https://github.com/py-econometrics/pyfixest/pull/900\n* @shapiromh made their first contribution in https://github.com/py-econometrics/pyfixest/pull/906\n* @schroedk made their first contribution in https://github.com/py-econometrics/pyfixest/pull/905\n* @WiktorTheScriptor made their first contribution in https://github.com/py-econometrics/pyfixest/pull/938\n* @damandhaliwal made their first contribution in https://github.com/py-econometrics/pyfixest/pull/944\n\n**Full Changelog**: https://github.com/py-econometrics/pyfixest/compare/v0.29.0...v0.30.0\n\n## PyFixest 0.29.0\n\n- We add options `fixef_k = \"nested\"` and `fixef_k = \"full\"` for computing small sample corrections via `pf.ssc()`. We set the defaults for `pf.feols()` and other estimation functions to `fixef_k = \"nested\"` to 100% mimic the defaults of `r-fixest`. This is a \"breaking change\" in the sense that it might (slightly) impact the standard errors of your estimations.\n- We add support for fully saturated event study estimation via the `SaturatedEventStudy` class, which can be called via `pf.event_study()`.\n- We add support for difference-in-differences specification tests following Lal (2025).\n- We add R2-within values to the default `etable()` output.\n- We fix a small bug in the Gelbach `decompose()` method, which would fail if a user selected `only_coef = True`.\n- The `decompose()` method runs fully on sparse matrices, which leads to large performance improvements on big data sets.\n- We fix a small bug in the `predict()` method with `newdata`, see [here](https://github.com/py-econometrics/pyfixest/issues/840) for details.\n- We add a function argument `rename_models` to help rename model names in the `coefplot()` and `iplot()` functions and methods:\n\n\n  ::: {#4bab4321 .cell execution_count=9}\n  ``` {.python .cell-code}\n  pf.coefplot(\n      models = [fit1, fit2, fit3],\n      rename_models = {\n          fit1._model_name_plot: \"Model 1\",\n          fit2._model_name_plot: \"Model 2\",\n          fit3._model_name_plot: \"Model 3\"\n      },\n  )\n  ```\n  \n  ::: {.cell-output .cell-output-display execution_count=8}\n  ```{=html}\n     <div id=\"V389H7\"></div>\n     <script type=\"text/javascript\" data-lets-plot-script=\"plot\">\n     \n     (function() {\n     // ----------\n     \n     const forceImmediateRender = false;\n     const responsive = false;\n     \n     let sizing = {\n         width_mode: \"MIN\",\n         height_mode: \"SCALED\",\n         width: null, \n         height: null \n     };\n     \n     const preferredWidth = document.body.dataset.letsPlotPreferredWidth;\n     if (preferredWidth !== undefined) {\n         sizing = {\n             width_mode: 'FIXED',\n             height_mode: 'SCALED',\n             width: parseFloat(preferredWidth)\n         };\n     }\n     \n     const containerDiv = document.getElementById(\"V389H7\");\n     let fig = null;\n     \n     function renderPlot() {\n         if (fig === null) {\n             const plotSpec = {\n  \"data\":{\n  \"Coefficient\":[\"Intercept\",\"Intercept\",\"X1\",\"X1\",\"X1\",\"Intercept\",\"Intercept\",\"X1\",\"X1\",\"X1\",\"X2\",\"X2\",\"X1\",\"X1\",\"X1\",\"X2\",\"X2\"],\n  \"Estimate\":[0.9185177588356422,0.8887791489339357,-1.0000858400741555,-0.9929357698186856,-0.9495255714191599,0.9185177588356422,0.8887791489339357,-1.0000858400741555,-0.9929357698186856,-0.9495255714191599,-0.176342366597783,-0.17422527489454398,-1.0000858400741555,-0.9929357698186856,-0.9495255714191599,-0.176342366597783,-0.17422527489454398],\n  \"2.5%\":[0.6990856170653881,0.6760162836776397,-1.1663660739416453,-1.154079075585678,-1.079777249583369,0.6990856170653881,0.6760162836776397,-1.1663660739416453,-1.154079075585678,-1.079777249583369,-0.21905485705638203,-0.20875549612158895,-1.1663660739416453,-1.154079075585678,-1.079777249583369,-0.21905485705638203,-0.20875549612158895],\n  \"97.5%\":[1.1379499006058964,1.1015420141902317,-0.8338056062066657,-0.8317924640516932,-0.8192738932549507,1.1379499006058964,1.1015420141902317,-0.8338056062066657,-0.8317924640516932,-0.8192738932549507,-0.13362987613918395,-0.13969505366749901,-0.8338056062066657,-0.8317924640516932,-0.8192738932549507,-0.13362987613918395,-0.13969505366749901],\n  \"Model\":[\"Model 1\",\"Model 2\",\"Model 1\",\"Model 2\",\"Model 3\",\"Model 1\",\"Model 2\",\"Model 1\",\"Model 2\",\"Model 3\",\"Model 2\",\"Model 3\",\"Model 1\",\"Model 2\",\"Model 3\",\"Model 2\",\"Model 3\"]\n  },\n  \"mapping\":{\n  \"x\":\"Coefficient\",\n  \"y\":\"Estimate\",\n  \"color\":\"Model\"\n  },\n  \"data_meta\":{\n  \"series_annotations\":[{\n  \"type\":\"int\",\n  \"column\":\"level_0\"\n  },{\n  \"type\":\"str\",\n  \"column\":\"Coefficient\"\n  },{\n  \"type\":\"int\",\n  \"column\":\"index\"\n  },{\n  \"type\":\"float\",\n  \"column\":\"Estimate\"\n  },{\n  \"type\":\"float\",\n  \"column\":\"Std. Error\"\n  },{\n  \"type\":\"float\",\n  \"column\":\"t value\"\n  },{\n  \"type\":\"float\",\n  \"column\":\"Pr(>|t|)\"\n  },{\n  \"type\":\"float\",\n  \"column\":\"2.5%\"\n  },{\n  \"type\":\"float\",\n  \"column\":\"97.5%\"\n  },{\n  \"type\":\"str\",\n  \"column\":\"Model\"\n  }]\n  },\n  \"guides\":{\n  \"y\":{\n  \"title\":\"Estimate and 95.0% Confidence Interval\"\n  }\n  },\n  \"coord\":{\n  \"name\":\"flip\",\n  \"flip\":true\n  },\n  \"ggsize\":{\n  \"width\":500.0,\n  \"height\":300.0\n  },\n  \"theme\":{\n  \"axis_text_x\":{\n  \"angle\":0.0,\n  \"blank\":false\n  }\n  },\n  \"kind\":\"plot\",\n  \"scales\":[],\n  \"layers\":[{\n  \"geom\":\"point\",\n  \"mapping\":{\n  },\n  \"position\":{\n  \"name\":\"dodge\",\n  \"width\":0.5\n  },\n  \"data_meta\":{\n  },\n  \"data\":{\n  }\n  },{\n  \"geom\":\"errorbar\",\n  \"mapping\":{\n  \"ymin\":\"2.5%\",\n  \"ymax\":\"97.5%\"\n  },\n  \"position\":{\n  \"name\":\"dodge\",\n  \"width\":0.5\n  },\n  \"data_meta\":{\n  },\n  \"width\":0.05,\n  \"data\":{\n  }\n  },{\n  \"geom\":\"hline\",\n  \"mapping\":{\n  },\n  \"data_meta\":{\n  },\n  \"yintercept\":0.0,\n  \"linetype\":\"dashed\",\n  \"color\":\"black\",\n  \"data\":{\n  }\n  }],\n  \"metainfo_list\":[],\n  \"spec_id\":\"2\"\n  };\n             window.letsPlotCall(function() { fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, containerDiv, sizing); });\n         } else {\n             fig.updateView({});\n         }\n     }\n     \n     const renderImmediately = \n         forceImmediateRender || (\n             sizing.width_mode === 'FIXED' && \n             (sizing.height_mode === 'FIXED' || sizing.height_mode === 'SCALED')\n         );\n     \n     if (renderImmediately) {\n         renderPlot();\n     }\n     \n     if (!renderImmediately || responsive) {\n         // Set up observer for initial sizing or continuous monitoring\n         var observer = new ResizeObserver(function(entries) {\n             for (let entry of entries) {\n                 if (entry.contentBoxSize && \n                     entry.contentBoxSize[0].inlineSize > 0) {\n                     if (!responsive && observer) {\n                         observer.disconnect();\n                         observer = null;\n                     }\n                     renderPlot();\n                     if (!responsive) {\n                         break;\n                     }\n                 }\n             }\n         });\n         \n         observer.observe(containerDiv);\n     }\n     \n     // ----------\n     })();\n     \n     </script>\n  ```\n  :::\n  :::\n  \n  \n- Made `lets-plot` an optional dependency. The package will now fall back to `matplotlib` for plotting if `lets-plot` is not installed. Users can install `lets-plot` with `pip install pyfixest[plots]`.\n- PyFixest now supports R2, adjusted R2, and within-R2 values for WLS (it previously only did for OLS, if at all).\n- We add support for standard error of predictions for OLS models without fixed effects. As a default, the predict model still returns a `np.ndarray`. If the argument `se_fit` is set to\n  `True`, we report the prediction standard errors. If argument `interval = \"prediction\"`, we return a `pd.DataFrame` with predictions, their standard errors, and confidence intervals.\n\n## PyFixest 0.28.0\n\n### New features and bug fixes\n- Adds a function argument `context`, that allows to pass information / context to the `formulaic.Formulaic.get_model_matrix()` call that creates the model matrix.\n- Fix a bug that caused reindexing of `LPDID._coeftable` when calling `LPDID.iplot()`. As a result, a second call of `LPDID.iplot()` would fail.\n- Bumps the required `formulaic` version to `1.1.0` and fixes errors that arose when a) the ref argument was used for i() syntax, which led to a silent failure under formulaic >= 1.1.0, and fixef() / predict() with fixed effects, which led to a loud error.\n\n### New experimental Features\n- Adds a `pf.feglm()` function that supports GLMs with normal and binomial families (gaussian, logit, probit) without fixed effects. Fixed effects support is work in progress.\n- Adds options to run the demean function via JAX. This might speed up the model fit if GPU is available.\n\n\n## PyFixest 0.27.0\n\n- Adds support for Gelbach's (JoLe 2016) Regression Decomposition method using a `decompose()` method for `Feols`.\n- Adds support for the multiple hypothesis correction by Westfall & Young via the `pf.wyoung()` function.\n- Input data frames to `pf.feols()` and `pf.fepois()` are now converted to `pandas` via [narwhals](https://github.com/narwhals-dev/narwhals).\n  As a result, users can not provide `duckdb` or `ibis` tables as inputs, as well as `pandas` and `polars` data frames. `polars` and `pyarrow`\n  are dropped as a dependencies.\n- Fixes a bug in the `wildboottest` method, which incorrectly used to run a regression on the demeaned dependend variable in case it was\n  applied after a fixed effects regression. My apologies for that!\n- Fixes a bug in the `ritest` method, which would use randomization inference coefficients instead of t-statistics, leading to incorrect results.\n  This has consequences for the rwolf() function, which, in case of running ri-inference, would default to run the randomization-t. My apolgies!\n- Adds a vignette on multiple testing corrections.\n- Adds a vignette on Gelbach's regression decomposition.\n\n## PyFixest 0.22.0 - 0.25.4\n\nSee the github changelog for details: [link](https://github.com/py-econometrics/pyfixest/releases).\n\n\n## PyFixest 0.22.0\n\n### Changes\n\n- Fix bug in wildboottest method @s3alfisc (#506)\n- docs: add sanskriti2005 as a contributor for infra @allcontributors (#503)\n- Infra: added the release-drafter for automation of release notes @sanskriti2005 (#502)\n- Fix broken link in contributing.md @s3alfisc (#499)\n- docs: add leostimpfle as a contributor for bug @allcontributors (#495)\n- Update justfile @leostimpfle (#494)\n- docs: add baggiponte as a contributor for doc @allcontributors (#490)\n- docs: improve installation section @baggiponte (#489)\n- Bump tornado from 6.4 to 6.4.1 @dependabot (#487)\n- docs: add leostimpfle as a contributor for code @allcontributors (#478)\n- Feols: speed up the creation of interacted fixed effects via `fe1^fe2` syntax @leostimpfle (#475)\n- rename resampling iterations to 'reps' in all methods @s3alfisc (#474)\n- fix a lot of broken links throught the repo @s3alfisc (#472)\n- Multiple readme fixes required after package was moved to py-econometrics project @s3alfisc (#450)\n\n### Infrastructure\n\n- infrastructure: fix minor release drafter bugs @s3alfisc (#504)\n\n## PyFixest 0.21.0\n\n- Add support for randomization inference via the `ritest()` method:\n\n::: {#a5767b69 .cell execution_count=10}\n``` {.python .cell-code}\nimport pyfixest as pf\ndata = pf.get_data()\n\nfit = pf.feols(\"Y ~ X1\", data = data)\nfit.ritest(resampvar=\"X1=0\", reps = 1000)\n```\n:::\n\n\n## PyFixest 0.20.0\n\n- This version introduces MyPy type checks to the entire pyfixest codebase. Thanks to @juanitorduz for nudging me to get started with this =). It also fixes a handful of smaller bugs.\n\n## PyFixest 0.19.0\n\n- Fixes multiple smaller and larger performance regressions. The NYC-Taxi example regression now takes approximately 22 seconds to run (... if my laptopt is connected to a power charger)!\n\n::: {#72c9234d .cell execution_count=11}\n``` {.python .cell-code}\n%load_ext autoreload\n%autoreload 2\n\nimport duckdb\nimport time\nimport numpy as np\nimport pyfixest as pf\n\n# %%\nnyc = duckdb.sql(\n    '''\n    FROM 'C:/Users/alexa/Documents/nyc-taxi/**/*.parquet'\n    SELECT\n        tip_amount, trip_distance, passenger_count,\n        vendor_id, payment_type, dropoff_at,\n        dayofweek(dropoff_at) AS dofw\n    WHERE year = 2012 AND month <= 3\n    '''\n    ).df()\n\n# convert dowf, vendor_id, payment_type to categorical\ntic = time.time()\nnyc[\"dofw\"] = nyc[\"dofw\"].astype(int)\nnyc[\"vendor_id\"] = nyc[\"vendor_id\"].astype(\"category\")\nnyc[\"payment_type\"] = nyc[\"payment_type\"].astype(\"category\")\nprint(f\"\"\"\n    I am convering columns of type 'objects' to 'categories' and 'int'data types outside\n    of the regression, hence I am cheating a bit. This saves {np.round(time.time() - tic)} seconds.\n    \"\"\"\n)\n#    I am convering columns of type 'objects' to 'categories' and 'int'data types outside\n#    of the regression, hence I am cheating a bit. This saves 7.0 seconds.\n\nrun = True\nif run:\n\n    # mock regression for JIT compilation\n    fit = pf.feols(\n        fml = \"tip_amount ~ trip_distance + passenger_count | vendor_id + payment_type + dofw\",\n        data = nyc.iloc[1:10_000],\n        copy_data = False,\n        store_data = False\n        )\n\n    import time\n    tic = time.time()\n    fit = pf.feols(\n        fml = \"tip_amount ~ trip_distance + passenger_count | vendor_id + payment_type + dofw\",\n        data = nyc,\n        copy_data = False, # saves a few seconds\n        store_data = False # saves a few second\n        )\n    passed = time.time() - tic\n    print(f\"Passed time is {np.round(passed)}.\")\n    # Passed time is 22.\n```\n:::\n\n\n- Adds three new function arguments to `feols()` and `fepois()`: `copy_data`, `store_data`, and `fixef_tol`.\n- Adds support for frequency weights with the `weights_type` function argument.\n\n::: {#5d7341ba .cell execution_count=12}\n``` {.python .cell-code}\nimport pyfixest as pf\n\ndata = pf.get_data(N = 10000, model = \"Fepois\")\ndf_weighted = data[[\"Y\", \"X1\", \"f1\"]].groupby([\"Y\", \"X1\", \"f1\"]).size().reset_index().rename(columns={0: \"count\"})\ndf_weighted[\"id\"] = list(range(df_weighted.shape[0]))\n\nprint(\"Dimension of the aggregated df:\", df_weighted.shape)\nprint(df_weighted.head())\n\nfit = pf.feols(\n    \"Y ~ X1 | f1\",\n    data = data\n)\nfit_weighted = pf.feols(\n    \"Y ~ X1 | f1\",\n    data = df_weighted,\n    weights = \"count\",\n    weights_type = \"fweights\"\n)\npf.etable([fit, fit_weighted], coef_fmt = \"b(se) \\n (t) \\n (p)\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDimension of the aggregated df: (1278, 5)\n     Y   X1   f1  count  id\n0  0.0  0.0  0.0     17   0\n1  0.0  0.0  1.0     11   1\n2  0.0  0.0  2.0     10   2\n3  0.0  0.0  3.0     17   3\n4  0.0  0.0  4.0     14   4\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n/Users/afischer/Documents/pyfixest/pyfixest/estimation/model_matrix_fixest_.py:215: UserWarning: 1 singleton fixed effect(s) detected. These observations are dropped from the model.\n  warnings.warn(\n/Users/afischer/Documents/pyfixest/pyfixest/estimation/model_matrix_fixest_.py:215: UserWarning: 1 singleton fixed effect(s) detected. These observations are dropped from the model.\n  warnings.warn(\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=9}\n```{=html}\n<div id=\"yzgyiuxxym\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#yzgyiuxxym table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#yzgyiuxxym thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#yzgyiuxxym p { margin: 0; padding: 0; }\n #yzgyiuxxym .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: hidden; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #yzgyiuxxym .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #yzgyiuxxym .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #yzgyiuxxym .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #yzgyiuxxym .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #yzgyiuxxym .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #yzgyiuxxym .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #yzgyiuxxym .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: bottom; padding-top: 4px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #yzgyiuxxym .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #yzgyiuxxym .gt_column_spanner_outer:first-child { padding-left: 0; }\n #yzgyiuxxym .gt_column_spanner_outer:last-child { padding-right: 0; }\n #yzgyiuxxym .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: bottom; padding-top: 4px; padding-bottom: 4px; overflow-x: hidden; display: inline-block; width: 100%; }\n #yzgyiuxxym .gt_spanner_row { border-bottom-style: hidden; }\n #yzgyiuxxym .gt_group_heading { padding-top: 0px; padding-bottom: 0px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: white; border-right-style: none; border-right-width: 1px; border-right-color: white; vertical-align: middle; text-align: left; }\n #yzgyiuxxym .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: middle; }\n #yzgyiuxxym .gt_from_md> :first-child { margin-top: 0; }\n #yzgyiuxxym .gt_from_md> :last-child { margin-bottom: 0; }\n #yzgyiuxxym .gt_row { padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: middle; overflow-x: hidden; }\n #yzgyiuxxym .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: hidden; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #yzgyiuxxym .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #yzgyiuxxym .gt_row_group_first td { border-top-width: 0.5px; }\n #yzgyiuxxym .gt_row_group_first th { border-top-width: 0.5px; }\n #yzgyiuxxym .gt_striped { color: #333333; background-color: #F4F4F4; }\n #yzgyiuxxym .gt_table_body { border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: black; }\n #yzgyiuxxym .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }\n #yzgyiuxxym .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }\n #yzgyiuxxym .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }\n #yzgyiuxxym .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #yzgyiuxxym .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #yzgyiuxxym .gt_left { text-align: left; }\n #yzgyiuxxym .gt_center { text-align: center; }\n #yzgyiuxxym .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #yzgyiuxxym .gt_font_normal { font-weight: normal; }\n #yzgyiuxxym .gt_font_bold { font-weight: bold; }\n #yzgyiuxxym .gt_font_italic { font-style: italic; }\n #yzgyiuxxym .gt_super { font-size: 65%; }\n #yzgyiuxxym .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #yzgyiuxxym .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n<thead>\n\n<tr class=\"gt_col_headings gt_spanner_row\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"\"></th>\n  <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"Y\">\n    <span class=\"gt_column_spanner\">Y</span>\n  </th>\n</tr>\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"0\">(1)</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"1\">(2)</th>\n</tr>\n</thead>\n<tbody class=\"gt_table_body\">\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">coef</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">X1</th>\n    <td class=\"gt_row gt_center\">0.001(0.012) <br> (0.088) <br> (0.930)</td>\n    <td class=\"gt_row gt_center\">0.001(0.012) <br> (0.088) <br> (0.930)</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">fe</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">f1</th>\n    <td class=\"gt_row gt_center\">x</td>\n    <td class=\"gt_row gt_center\">x</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">stats</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Observations</th>\n    <td class=\"gt_row gt_center\">9996</td>\n    <td class=\"gt_row gt_center\">9996</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">S.E. type</th>\n    <td class=\"gt_row gt_center\">iid</td>\n    <td class=\"gt_row gt_center\">iid</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.011</td>\n    <td class=\"gt_row gt_center\">0.011</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">R<sup>2</sup> Within</th>\n    <td class=\"gt_row gt_center\">0.000</td>\n    <td class=\"gt_row gt_center\">0.000</td>\n  </tr>\n</tbody>\n  <tfoot class=\"gt_sourcenotes\">\n  \n  <tr>\n    <td class=\"gt_sourcenote\" colspan=\"3\">Significance levels: * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001. Format of coefficient cell:\nCoefficient(Std. Error) \n (t-stats) \n (p-value)</td>\n  </tr>\n\n</tfoot>\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\n- Bugfix: Wild Cluster Bootstrap Inference with Weights would compute unweighted standard errors. Sorry about that! WLS is not supported for the WCB.\n- Adds support for CRV3 inference with weights.\n\n\n## PyFixest 0.18.0\n\n- Large Refactoring of Interal Processing of Model Formulas, in particular `FixestFormulaParser` and `model_matrix_fixest`. As a results, the code should be cleaner and more robust.\n- Thanks to the refactoring, we can now bump the required `formulaic` version to the stable `1.0.0` release.\n- The `fml` argument of `model_matrix_fixest` is deprecated. Instead, `model_matrix_fixest`\n  now asks for a `FixestFormula`, which is essentially a dictionary with information on model\n  specifications like a first stage formula (if applicable), dependent variables, fixed effects,\n  etc.\n- Additionally, `model_matrix_fixest` now returns a dictionary instead of a tuple.\n- Brings back fixed effects reference setting via `i(var1, var2, ref)` syntax. Deprecates the `i_ref1`, `i_ref2` function arguments. I.e. it is again possible to e.g. run\n\n::: {#14cf020c .cell execution_count=13}\n``` {.python .cell-code}\nimport pyfixest as pf\ndata = pf.get_data()\n\nfit1 = pf.feols(\"Y ~ i(f1, X2)\", data=data)\nfit1.coef()[0:8]\n```\n:::\n\n\nVia the `ref` syntax, via can set the reference level:\n\n::: {#b9a8992c .cell execution_count=14}\n``` {.python .cell-code}\nfit2 = pf.feols(\"Y ~ i(f1, X2, ref = 1)\", data=data)\nfit2.coef()[0:8]\n```\n:::\n\n\n## PyFixest 0.17.0\n\n- Restructures the codebase and reorganizes how users can interact with the `pyfixest` API. It is now recommended to use `pyfixest` in the following way:\n\n\n  ::: {#91ee0eaa .cell execution_count=15}\n  ``` {.python .cell-code}\n  import numpy as np\n  import pyfixest as pf\n  data = pf.get_data()\n  data[\"D\"] = data[\"X1\"] > 0\n  fit = pf.feols(\"Y ~ D + f1\", data = data)\n  fit.tidy()\n  ```\n  \n  ::: {.cell-output .cell-output-display execution_count=10}\n  ```{=html}\n  <div>\n  <style scoped>\n      .dataframe tbody tr th:only-of-type {\n          vertical-align: middle;\n      }\n  \n      .dataframe tbody tr th {\n          vertical-align: top;\n      }\n  \n      .dataframe thead th {\n          text-align: right;\n      }\n  </style>\n  <table border=\"1\" class=\"dataframe\">\n    <thead>\n      <tr style=\"text-align: right;\">\n        <th></th>\n        <th>Estimate</th>\n        <th>Std. Error</th>\n        <th>t value</th>\n        <th>Pr(&gt;|t|)</th>\n        <th>2.5%</th>\n        <th>97.5%</th>\n      </tr>\n      <tr>\n        <th>Coefficient</th>\n        <th></th>\n        <th></th>\n        <th></th>\n        <th></th>\n        <th></th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <th>Intercept</th>\n        <td>0.778849</td>\n        <td>0.170261</td>\n        <td>4.574437</td>\n        <td>0.000005</td>\n        <td>0.444737</td>\n        <td>1.112961</td>\n      </tr>\n      <tr>\n        <th>D</th>\n        <td>-1.402617</td>\n        <td>0.152224</td>\n        <td>-9.214140</td>\n        <td>0.000000</td>\n        <td>-1.701335</td>\n        <td>-1.103899</td>\n      </tr>\n      <tr>\n        <th>f1</th>\n        <td>0.004774</td>\n        <td>0.008058</td>\n        <td>0.592508</td>\n        <td>0.553645</td>\n        <td>-0.011038</td>\n        <td>0.020587</td>\n      </tr>\n    </tbody>\n  </table>\n  </div>\n  ```\n  :::\n  :::\n  \n  \n  The update should not inroduce any breaking changes. Thanks to [@Wenzhi-Ding](https://github.com/Wenzhi-Ding) for the PR!\n\n- Adds support for simultaneous confidence intervals via a multiplier bootstrap. Thanks to [@apoorvalal](https://github.com/apoorvalal) for the contribution!\n\n\n  ::: {#322454ea .cell execution_count=16}\n  ``` {.python .cell-code}\n  fit.confint(joint = True)\n  ```\n  \n  ::: {.cell-output .cell-output-display execution_count=11}\n  ```{=html}\n  <div>\n  <style scoped>\n      .dataframe tbody tr th:only-of-type {\n          vertical-align: middle;\n      }\n  \n      .dataframe tbody tr th {\n          vertical-align: top;\n      }\n  \n      .dataframe thead th {\n          text-align: right;\n      }\n  </style>\n  <table border=\"1\" class=\"dataframe\">\n    <thead>\n      <tr style=\"text-align: right;\">\n        <th></th>\n        <th>2.5%</th>\n        <th>97.5%</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <th>Intercept</th>\n        <td>0.386056</td>\n        <td>1.171642</td>\n      </tr>\n      <tr>\n        <th>D</th>\n        <td>-1.753799</td>\n        <td>-1.051435</td>\n      </tr>\n      <tr>\n        <th>f1</th>\n        <td>-0.013815</td>\n        <td>0.023364</td>\n      </tr>\n    </tbody>\n  </table>\n  </div>\n  ```\n  :::\n  :::\n  \n  \n- Adds support for the causal cluster variance estimator by [Abadie et al. (QJE, 2023)](https://academic.oup.com/qje/article/138/1/1/6750017)\n  for OLS via the `.ccv()` method.\n\n\n  ::: {#c98eb027 .cell execution_count=17}\n  ``` {.python .cell-code}\n  fit.ccv(treatment = \"D\", cluster = \"group_id\")\n  ```\n  \n  ::: {.cell-output .cell-output-stderr}\n  ```\n  /Users/afischer/Documents/pyfixest/pyfixest/estimation/feols_.py:1577: UserWarning: The initial model was not clustered. CRV1 inference is computed and stored in the model object.\n    warnings.warn(\n  ```\n  :::\n  \n  ::: {.cell-output .cell-output-display execution_count=12}\n  ```{=html}\n  <div>\n  <style scoped>\n      .dataframe tbody tr th:only-of-type {\n          vertical-align: middle;\n      }\n  \n      .dataframe tbody tr th {\n          vertical-align: top;\n      }\n  \n      .dataframe thead th {\n          text-align: right;\n      }\n  </style>\n  <table border=\"1\" class=\"dataframe\">\n    <thead>\n      <tr style=\"text-align: right;\">\n        <th></th>\n        <th>Estimate</th>\n        <th>Std. Error</th>\n        <th>t value</th>\n        <th>Pr(&gt;|t|)</th>\n        <th>2.5%</th>\n        <th>97.5%</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <th>CCV</th>\n        <td>-1.402616862217994</td>\n        <td>0.269138</td>\n        <td>-5.21151</td>\n        <td>0.000059</td>\n        <td>-1.968055</td>\n        <td>-0.837178</td>\n      </tr>\n      <tr>\n        <th>CRV1</th>\n        <td>-1.402617</td>\n        <td>0.205132</td>\n        <td>-6.837621</td>\n        <td>0.000002</td>\n        <td>-1.833584</td>\n        <td>-0.97165</td>\n      </tr>\n    </tbody>\n  </table>\n  </div>\n  ```\n  :::\n  :::\n  \n  \n## PyFixest 0.16.0\n\n- Adds multiple quality of life improvements for developers, thanks to [NKeleher](https://github.com/NKeleher).\n- Adds more options to customize `etable()` output thanks to [Wenzhi-Ding](https://github.com/Wenzhi-Ding).\n- Implements Romano-Wolf and Bonferroni corrections for multiple testing in the `multcomp` module.\n\n## PyFixest 0.15.\n\n- Adds support for weighted least squares for `feols()`.\n- Reduces testing time drastically by running tests on fewer random data samples. Qualitatively,\n  the set of test remains identical.\n- Some updates for future `pandas` compatibility.\n\n## PyFixest 0.14.0\n\n- Moves the documentation to [quartodoc](https://github.com/machow/quartodoc).\n- Changes all docstrings to `numpy` format.\n- Difference-in-differences estimation functions now need to be imported via the `pyfixest.did.estimation` module:\n\n::: {#cdedc539 .cell execution_count=18}\n``` {.python .cell-code}\nfrom pyfixest.did.estimation import did2s, lpdid, event_study\n```\n:::\n\n\n## PyFixest 0.13.5\n\n- Fixes a bug that lead to incorrect results when the dependent variable and **all covariates** (excluding the fixed effects) where integers.\n\n## PyFixest 0.13.4\n\n- Fixes a bug in `etable()` with IV's that occurred because `feols()` does not report R2 statistics for IVs.\n\n## PyFixest 0.13.2\n\n- Fixes a bug in `etable()` and a warning in `fixest_model_matrix` that arose with higher `pandas` versions. Thanks to @aeturrell for reporting!\n\n## PyFixest 0.13.0\n\n### New Features\n\n- Introduces a new `pyfixest.did` module which contains routines for Difference-in-Differences estimation.\n- Introduces support for basic versions of the local projections DiD estimator following [Dube et al (2023)](https://www.nber.org/papers/w31184)\n- Adds a new vignette for Difference-in-Differences estimation.\n- Reports R2 values in `etable()`.\n\n\n## PyFixest 0.12.0\n\n\n### Enhancements:\n\n- Good performance improvements for singleton fixed effects detection. Thanks to [@styfenschaer](https://github.com/styfenschaer) for the PR! See [#229](https://github.com/py-econometrics/pyfixest/issues/229).\n- Uses the [r2u project](https://github.com/eddelbuettel/r2u) for installing R and R packages on github actions, with great performance improvements.\n- Allows to pass `polars` data frames to `feols()`, `fepois()` and `predict()`. [#232](https://github.com/py-econometrics/pyfixest/issues/232). Thanks to [@vincentarelbundock](https://github.com/py-econometrics/pyfixest/issues/232) for the suggestion!\n\n### Bug Fixes:\n\n- Missing variables in features were not always handled correctly in `predict()` with `newdata` not `None` in the presence of missing data, which would lead to an error. See [#246](https://github.com/py-econometrics/pyfixest/issues/246) for details.\n- Categorical variables were not always handled correctly in `predict()` with `newdata` not `None`, because the number of fixed effects levels in `newdata` might be smaller than in `data`. In consequence, some levels were not found, which lead to an error. See [#245](https://github.com/py-econometrics/pyfixest/issues/245) for details. Thanks to [@jiafengkevinchen](https://github.com/jiafengkevinchen) for the pointer!\n- Multicollinearity checks for over-identified IV was not implemented correctly, which lead to a dimension error. See [#236](https://github.com/py-econometrics/pyfixest/issues/236) for details.  Thanks to [@jiafengkevinchen](https://github.com/jiafengkevinchen) for the pointer!\n- The number of degrees of freedom `k` was computed incorrectly if columns were dropped from the design matrix `X` in the presence of multicollinearity. See [#235](https://github.com/py-econometrics/pyfixest/issues/235) for details.  Thanks to [@jiafengkevinchen](https://github.com/jiafengkevinchen) for the pointer!\n- If all variables were dropped due to multicollinearity, an unclear and imprecise error message was produced. See [#228](https://github.com/py-econometrics/pyfixest/issues/228) for details. Thanks to [@manferdinig](https://github.com/manferdinig) for the pointer!\n- If selection `fixef_rm = 'singleton'`, `feols()` and `fepois()` would fail, which has been fixed. [#192](https://github.com/py-econometrics/pyfixest/issues/192)\n\n### Dependency Requirements\n\n- For now, sets `formulaic` versions to be `0.6.6` or lower as version `1.0.0` seems to have introduced a problem with the `i()` operator, See [#244](https://github.com/py-econometrics/pyfixest/issues/244) for details.\n- Drops dependency on `pyhdfe`.\n\n## PyFixest 0.11.1\n\n- Fixes some bugs around the computation of R-squared values (see [issue #103](https://github.com/py-econometrics/pyfixest/issues/103)).\n- Reports R-squared values again when calling `.summary()`.\n\n## PyFixest 0.11.0\n\n- Significant speedups for CRV1 inference.\n\n## PyFixest 0.10.12\n\nFixes a small bug with the separation check for poisson regression #138.\n\n## PyFixest 0.10.11\n\nFixes bugs with i(var1, var2) syntax introduced with PyFixest 0.10.10.\n\n## PyFixest 0.10.10\n\nFixes a bug with variable interactions via `i(var)` syntax. See [issue #221](https://github.com/py-econometrics/pyfixest/issues/211).\n\n## PyFixest 0.10.9\n\nMakes `etable()` prettier and more informative.\n\n## PyFixest 0.10.8\n\n### Breaking changes\nReference levels for the `i()` formula syntax can no longer be set within the formula, but need to be added via the `i_ref1` function argument to either `feols()` and `fepois()`.\n\n### New feature\n\nA `dids2()` function is added, which implements the 2-stage difference-in-differences procedure à la Gardner and follows the syntax of @kylebutts [did2s](https://github.com/kylebutts/did2s) R package.\n\n```py\nfrom pyfixest.did.did import did2s\nfrom pyfixest.estimation import feols\nfrom pyfixest.visualize import iplot\nimport pandas as pd\nimport numpy as np\n\ndf_het = pd.read_csv(\"https://raw.githubusercontent.com/py-econometrics/pyfixest/master/pyfixest/did/data/df_het.csv\")\n\nfit = did2s(\n    df_het,\n    yname = \"dep_var\",\n    first_stage = \"~ 0 | state + year\",\n    second_stage = \"~i(rel_year)\",\n    treatment = \"treat\",\n    cluster = \"state\",\n    i_ref1 = [-1.0, np.inf],\n)\n\nfit_twfe = feols(\n    \"dep_var ~ i(rel_year) | state + year\",\n    df_het,\n    i_ref1 = [-1.0, np.inf]\n)\n\niplot([fit, fit_twfe], coord_flip=False, figsize = (900, 400), title = \"TWFE vs DID2S\")\n```\n![](figures/event_study.svg)\n\n\n\n## PyFixest 0.10.7\n\n- Adds basic support for event study estimation via two-way fixed effects and Gardner's two-stage \"Did2s\" approach.\n  This is a beta version and experimental. Further updates (i.e. proper event studies vs \"only\" ATTs) and a more flexible\n  did2s front end will follow in future releases.\n\n```python\n%load_ext autoreload\n%autoreload 2\n\nfrom pyfixest.did.did import event_study\nimport pyfixest as pf\nimport pandas as pd\ndf_het = pd.read_csv(\"pyfixest/did/data/df_het.csv\")\n\nfit_twfe = event_study(\n    data = df_het,\n    yname = \"dep_var\",\n    idname= \"state\",\n    tname = \"year\",\n    gname = \"g\",\n    estimator = \"twfe\"\n)\n\nfit_did2s = event_study(\n    data = df_het,\n    yname = \"dep_var\",\n    idname= \"state\",\n    tname = \"year\",\n    gname = \"g\",\n    estimator = \"did2s\"\n)\n\npf.etable([fit_twfe, fit_did2s])\n# | Coefficient   | est1             | est2             |\n# |:--------------|:-----------------|:-----------------|\n# | ATT           | 2.135*** (0.044) | 2.152*** (0.048) |\n# Significance levels: * p < 0.05, ** p < 0.01, *** p < 0.001\n```\n\n## PyFixest 0.10.6\n\n- Adds an `etable()` function that outputs markdown, latex or a pd.DataFrame.\n\n## PyFixest 0.10.5\n\n- Fixes a big in IV estimation that would trigger an error. See [here](https://github.com/py-econometrics/pyfixest/issues/197) for details. Thanks to @aeturrell for reporting!\n\n## PyFixest 0.10.4\n\n- Implements a custom function to drop singleton fixed effects.\n- Additional small performance improvements.\n\n## PyFixest 0.10.3\n\n- Allows for white space in the multiway clustering formula.\n- Adds documentation for multiway clustering.\n\n## PyFixest 0.10.2\n\n- Adds support for two-way clustering.\n- Adds support for CRV3 inference for Poisson regression.\n\n## PyFixest 0.10.1\n\n- Adapts the internal fixed effects demeaning criteron to match `PyHDFE's default.\n- Adds Styfen as coauthor.\n\n## PyFixest 0.10\n\n- Multiple performance improvements.\n- Most importantly, implements a custom demeaning algorithm in `numba` - thanks to Styfen Schaer (@styfenschaer),\n  which leads to performance improvements of 5x or more:\n\n```python\n%load_ext autoreload\n%autoreload 2\n\nimport numpy as np\nimport time\nimport pyhdfe\nfrom pyfixest.demean import demean\n\nnp.random.seed(1238)\nN = 10_000_000\nx = np.random.normal(0, 1, 10*N).reshape((N,10))\nf1 = np.random.choice(list(range(1000)), N).reshape((N,1))\nf2 = np.random.choice(list(range(1000)), N).reshape((N,1))\n\nflist = np.concatenate((f1, f2), axis = 1)\nweights = np.ones(N)\n\nalgorithm = pyhdfe.create(flist)\n\nstart_time = time.time()\nres_pyhdfe = algorithm.residualize(x)\nend_time = time.time()\nprint(end_time - start_time)\n# 26.04527711868286\n\n\nstart_time = time.time()\nres_pyfixest, success = demean(x, flist, weights, tol = 1e-10)\n# Calculate the execution time\nend_time = time.time()\nprint(end_time - start_time)\n#4.334428071975708\n\nnp.allclose(res_pyhdfe , res_pyfixest)\n# True\n```\n\n\n\n## PyFixest 0.9.11\n\n- Bump required `formulaic` version to `0.6.5`.\n- Stop copying the data frame in `fixef()`.\n\n## PyFixest 0.9.10\n\n- Fixes a big in the `wildboottest` method (see [#158](https://github.com/py-econometrics/pyfixest/issues/158)).\n- Allows to run a wild bootstrap after fixed effect estimation.\n\n## PyFixest 0.9.9\n\n- Adds support for `wildboottest` for Python `3.11`.\n\n## PyFixest 0.9.8\n\n- Fixes a couple more bugs in the `predict()` and `fixef()` methods.\n- The `predict()` argument `data` is renamed to `newdata`.\n\n## PyFixest 0.9.7\n\nFixes a bug in `predict()` produced when multicollinear variables are dropped.\n\n## PyFixest 0.9.6\n\nImproved Collinearity handling. See [#145](https://github.com/py-econometrics/pyfixest/issues/145)\n\n## PyFixest 0.9.5\n\n\n- Moves plotting from `matplotlib` to `lets-plot`.\n- Fixes a few minor bugs in plotting and the `fixef()` method.\n\n\n## PyFixest 0.9.1\n\n### Breaking API changes\n\nIt is no longer required to initiate an object of type `Fixest` prior to running [Feols](/reference/estimation.feols_.Feols.qmd) or `fepois`. Instead,\nyou can now simply use `feols()` and `fepois()` as functions, just as in `fixest`. Both function can be found in an\n`estimation` module and need to obtain a `pd.DataFrame` as a function argument:\n\n```py\nfrom pyfixest.estimation import fixest, fepois\nfrom pyfixest.utils import get_data\n\ndata = get_data()\nfit = feols(\"Y ~ X1 | f1\", data = data, vcov = \"iid\")\n```\n\nCalling `feols()` will return an instance of class [Feols](/reference/estimation.feols_.Feols.qmd), while calling `fepois()` will return an instance of class `Fepois`.\nMultiple estimation syntax will return an instance of class `FixestMulti`.\n\nPost processing works as before via `.summary()`, `.tidy()` and other methods.\n\n### New Features\n\nA summary function allows to compare multiple models:\n\n```py\nfrom pyfixest.summarize import summary\nfit2 = feols(\"Y ~ X1 + X2| f1\", data = data, vcov = \"iid\")\nsummary([fit, fit2])\n```\n\nVisualization is possible via custom methods (`.iplot()` & `.coefplot()`), but a new module allows to visualize\n  a list of [Feols](/reference/estimation.feols_.Feols.qmd) and/or `Fepois` instances:\n\n```py\nfrom pyfixest.visualize import coefplot, iplot\ncoefplot([fit, fit2])\n```\n\nThe documentation has been improved (though there is still room for progress), and the code has been cleaned up a\nbit (also lots of room for improvements).\n\n",
    "supporting": [
      "changelog_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}
