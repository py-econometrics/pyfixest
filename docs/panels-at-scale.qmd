---
title: "Efficient Panel Estimation via Regression Compression & Mundlak Transforms"
format: html
toc: true
toc-title: "On this page"
toc-location: left
---

# Setup

```{python}
import pyfixest as pf
from pyfixest.utils.dgps import get_sharkfin

data = get_sharkfin()
data.head()
```

We start by inspecting the data:

```{python}
pf.panelview(
    data = data,
    unit = "unit",
    time = "year",
    treat = "treat"
)
```

We can also inspect the dependent variable over time:

```{python}
pf.panelview(
    data = data,
    unit = "unit",
    time = "year",
    treat = "treat",
    outcome = "Y"
)
```

# Computing the ATE

We will compute the average treatment effect by a two-way fixed effects model.

## Strategy 1: OLS on the 'long' Data Set

We can easily do so on the "long" data set via `pf.feols()`:

```{python}
fit = pf.feols("Y ~ W | unit + year", data = data)
fit.summary()
```

## Strategy 2: Regression Compression & Mundlak
