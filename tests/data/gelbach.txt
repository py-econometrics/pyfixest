                                                       ___  ____  ____  ____  ____(R)
                                                      /__    /   ____/   /   ____/
                                                     ___/   /   /___/   /   /___/
                                                       Statistics/Data analysis


        ___  ____  ____  ____  ____ ®
       /__    /   ____/   /   ____/      18.0
      ___/   /   /___/   /   /___/       MP—Parallel Edition

       Statistics and Data Science       Copyright 1985-2023 StataCorp LLC
                                         StataCorp
                                         4905 Lakeway Drive
                                         College Station, Texas 77845 USA
                                         800-STATA-PC        https://www.stata.com
                                         979-696-4600        stata@stata.com

      Stata license: 6-user 4-core network perpetual
      Serial number: 501806325985
        Licensed to: Leonard Stimpfle
                     Universiteit Gent

      Notes:
            1. Unicode is supported; see help unicode_advice.
            2. More than 2 billion observations are allowed; see help obs_advice.
            3. Maximum number of variables is set to 5,000 but can be increased; see help set_maxvar.
            4. New update available; type -update all-

     1 . do "/var/folders/bf/bk8w5pp90s13q64t_jgc2jmr0000gn/T//SD21076.000000"

     2 . clear all

     3 . // Create data for Gelbach example
     4 . set obs 500
      Number of observations (_N) was 0, now 500.

     5 . gen double x1 = invnorm(uniform())

     6 . gen double x21 = x1*1 + invnorm(uniform())

     7 . gen double x22 = x1*0.25 + x21*0.75 + invnorm(uniform())

     8 . gen double x23 = x1*0.4 + x21*0.6 + x22*0.4 + invnorm(uniform())

     9 . gen double y = x1*1 + x21*2 + x22*0.5 + x23*0.75 + invnorm(uniform())

    10 . gen cluster = floor((_n - 1) / 50) + 1

    11 .
    12 . b1x2 y, x1all(x1) x2all(x2*) x2delta(g1 = x21 x22 : g2=x23) x1only(x1) robust

                                                            Number of obs = 500


      Restricted regression:

    13 . b1x2: reg y x1    , robust

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   4.540042   .1459516    31.11   0.000     4.253982    4.826102
             _cons |  -.0910292   .1539174    -0.59   0.554    -.3927018    .2106433
      ------------------------------------------------------------------------------

      Unrestricted regression:

    14 . b1x2: reg y x1  x21 x22 x23    , robust
      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   .9612114   .0591905    16.24   0.000     .8452001    1.077223
               x21 |   1.888122   .0617351    30.58   0.000     1.767123     2.00912
               x22 |   .4497422   .0463791     9.70   0.000     .3588409    .5406435
               x23 |    .827022   .0450284    18.37   0.000     .7387679     .915276
             _cons |   .0057466   .0437916     0.13   0.896    -.0800833    .0915765
      ------------------------------------------------------------------------------

      Decomposition of changes in coefficients on x1 vars:

             x1

      into parts due to these groups:

      g1  = x21 x22

      g2 = x23

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
      x1           |
                g1 |   2.406336   .1204402    19.98   0.000     2.170278    2.642395
                g2 |   1.172494   .0806804    14.53   0.000     1.014364    1.330625
              __TC |   3.578831   .1487214    24.06   0.000     3.287342    3.870319
      ------------------------------------------------------------------------------

      Note: The __TC...  line is the sum of all x2 variables' impacts on each x1.
            The reported covariance between this coef and all others is zero.
            This is NOT correct!!

      Done with -b1x2-.


    15 . b1x2 y, x1all(x1) x2all(x2*) x2delta(g1 = x21 x22 : g2=x23) x1only(x1) cluster(cluster)

                                                            Number of obs = 500


      Restricted regression:

    16 . b1x2: reg y x1    ,  cluster(cluster)

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   4.540042   .1418958    32.00   0.000     4.261932    4.818153
             _cons |  -.0910292   .2093282    -0.43   0.664     -.501305    .3192465
      ------------------------------------------------------------------------------

      Unrestricted regression:

    17 . b1x2: reg y x1  x21 x22 x23    ,  cluster(cluster)
      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   .9612114   .0638756    15.05   0.000     .8360174    1.086405
               x21 |   1.888122     .05717    33.03   0.000      1.77607    2.000173
               x22 |   .4497422   .0482783     9.32   0.000     .3551185    .5443659
               x23 |    .827022   .0479481    17.25   0.000     .7330454    .9209985
             _cons |   .0057466   .0544726     0.11   0.916    -.1010178     .112511
      ------------------------------------------------------------------------------

      Decomposition of changes in coefficients on x1 vars:

             x1

      into parts due to these groups:

      g1  = x21 x22

      g2 = x23

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
      x1           |
                g1 |   2.406336   .1216029    19.79   0.000     2.167999    2.644674
                g2 |   1.172494   .0842954    13.91   0.000     1.007279     1.33771
              __TC |   3.578831   .1506205    23.76   0.000      3.28362    3.874042
      ------------------------------------------------------------------------------

      Note: The __TC...  line is the sum of all x2 variables' impacts on each x1.
            The reported covariance between this coef and all others is zero.
            This is NOT correct!!

      Done with -b1x2-.


    18 .
    19 . b1x2 y, x1all(x1) x2all(x2*) x2delta(g1 = x21 : g2=x22 x23) x1only(x1) robust

                                                            Number of obs = 500


      Restricted regression:

    20 . b1x2: reg y x1    , robust

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   4.540042   .1459516    31.11   0.000     4.253982    4.826102
             _cons |  -.0910292   .1539174    -0.59   0.554    -.3927018    .2106433
      ------------------------------------------------------------------------------

      Unrestricted regression:

    21 . b1x2: reg y x1  x21 x22 x23    , robust
      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   .9612114   .0591905    16.24   0.000     .8452001    1.077223
               x21 |   1.888122   .0617351    30.58   0.000     1.767123     2.00912
               x22 |   .4497422   .0463791     9.70   0.000     .3588409    .5406435
               x23 |    .827022   .0450284    18.37   0.000     .7387679     .915276
             _cons |   .0057466   .0437916     0.13   0.896    -.0800833    .0915765
      ------------------------------------------------------------------------------

      Decomposition of changes in coefficients on x1 vars:

             x1

      into parts due to these groups:

      g1  = x21

      g2 = x22 x23

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
      x1           |
                g1 |   1.913618    .107477    17.80   0.000     1.702967    2.124269
                g2 |   1.665212   .0964033    17.27   0.000     1.476266    1.854159
              __TC |   3.578831   .1487214    24.06   0.000     3.287342    3.870319
      ------------------------------------------------------------------------------

      Note: The __TC...  line is the sum of all x2 variables' impacts on each x1.
            The reported covariance between this coef and all others is zero.
            This is NOT correct!!

      Done with -b1x2-.


    22 . b1x2 y, x1all(x1) x2all(x2*) x2delta(g1 = x21 : g2=x22 x23) x1only(x1) cluster(cluster)

                                                            Number of obs = 500


      Restricted regression:

    23 . b1x2: reg y x1    ,  cluster(cluster)

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   4.540042   .1418958    32.00   0.000     4.261932    4.818153
             _cons |  -.0910292   .2093282    -0.43   0.664     -.501305    .3192465
      ------------------------------------------------------------------------------

      Unrestricted regression:

    24 . b1x2: reg y x1  x21 x22 x23    ,  cluster(cluster)
      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   .9612114   .0638756    15.05   0.000     .8360174    1.086405
               x21 |   1.888122     .05717    33.03   0.000      1.77607    2.000173
               x22 |   .4497422   .0482783     9.32   0.000     .3551185    .5443659
               x23 |    .827022   .0479481    17.25   0.000     .7330454    .9209985
             _cons |   .0057466   .0544726     0.11   0.916    -.1010178     .112511
      ------------------------------------------------------------------------------

      Decomposition of changes in coefficients on x1 vars:

             x1

      into parts due to these groups:

      g1  = x21

      g2 = x22 x23

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
      x1           |
                g1 |   1.913618   .1226732    15.60   0.000     1.673183    2.154053
                g2 |   1.665212   .0931977    17.87   0.000     1.482548    1.847877
              __TC |   3.578831   .1506205    23.76   0.000      3.28362    3.874042
      ------------------------------------------------------------------------------

      Note: The __TC...  line is the sum of all x2 variables' impacts on each x1.
            The reported covariance between this coef and all others is zero.
            This is NOT correct!!

      Done with -b1x2-.


    25 .
    26 . b1x2 y, x1all(x1) x2all(x2*) x1only(x1) robust

                                                            Number of obs = 500


      Restricted regression:

    27 . b1x2: reg y x1    , robust

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   4.540042   .1459516    31.11   0.000     4.253982    4.826102
             _cons |  -.0910292   .1539174    -0.59   0.554    -.3927018    .2106433
      ------------------------------------------------------------------------------

      Unrestricted regression:

    28 . b1x2: reg y x1  x21 x22 x23    , robust
      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   .9612114   .0591905    16.24   0.000     .8452001    1.077223
               x21 |   1.888122   .0617351    30.58   0.000     1.767123     2.00912
               x22 |   .4497422   .0463791     9.70   0.000     .3588409    .5406435
               x23 |    .827022   .0450284    18.37   0.000     .7387679     .915276
             _cons |   .0057466   .0437916     0.13   0.896    -.0800833    .0915765
      ------------------------------------------------------------------------------

      Decomposition of changes in coefficients on x1 vars:

             x1

      into parts due to these groups:

      ALL  = x21 x22 x23

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
      x1           |
               ALL |   3.578831   .1487214    24.06   0.000     3.287342    3.870319
              __TC |   3.578831   .1487214    24.06   0.000     3.287342    3.870319
      ------------------------------------------------------------------------------

      Note: The __TC...  line is the sum of all x2 variables' impacts on each x1.
            The reported covariance between this coef and all others is zero.
            This is NOT correct!!

      Done with -b1x2-.


    29 . b1x2 y, x1all(x1) x2all(x2*) x1only(x1) cluster(cluster)

                                                            Number of obs = 500


      Restricted regression:

    30 . b1x2: reg y x1    ,  cluster(cluster)

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   4.540042   .1418958    32.00   0.000     4.261932    4.818153
             _cons |  -.0910292   .2093282    -0.43   0.664     -.501305    .3192465
      ------------------------------------------------------------------------------

      Unrestricted regression:

    31 . b1x2: reg y x1  x21 x22 x23    ,  cluster(cluster)
      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
                x1 |   .9612114   .0638756    15.05   0.000     .8360174    1.086405
               x21 |   1.888122     .05717    33.03   0.000      1.77607    2.000173
               x22 |   .4497422   .0482783     9.32   0.000     .3551185    .5443659
               x23 |    .827022   .0479481    17.25   0.000     .7330454    .9209985
             _cons |   .0057466   .0544726     0.11   0.916    -.1010178     .112511
      ------------------------------------------------------------------------------

      Decomposition of changes in coefficients on x1 vars:

             x1

      into parts due to these groups:

      ALL  = x21 x22 x23

      ------------------------------------------------------------------------------
                 y | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
      -------------+----------------------------------------------------------------
      x1           |
               ALL |   3.578831   .1506205    23.76   0.000      3.28362    3.874042
              __TC |   3.578831   .1506205    23.76   0.000      3.28362    3.874042
      ------------------------------------------------------------------------------

      Note: The __TC...  line is the sum of all x2 variables' impacts on each x1.
            The reported covariance between this coef and all others is zero.
            This is NOT correct!!

      Done with -b1x2-.


    32 .
    33 . translate @Results /Users/leonardstimpfle/Desktop/gelbach/gelbach.txt
      file /Users/leonardstimpfle/Desktop/gelbach/gelbach.txt already exists
      r(602);

      end of do-file

      r(602);

    34 . do "/var/folders/bf/bk8w5pp90s13q64t_jgc2jmr0000gn/T//SD21076.000000"

    35 . translate @Results /Users/leonardstimpfle/Desktop/gelbach/gelbach.txt
